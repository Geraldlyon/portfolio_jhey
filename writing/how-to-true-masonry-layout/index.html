<!doctype html><html lang="en">
<!-- Mirrored from jhey.dev/writing/how-to-true-masonry-layout/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 Nov 2021 22:51:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><title>How To: True Masonry Layout - I'm Jhey Tompkins!</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#141a1c"><meta name="description" content="I'm a developer that makes awesome things for awesome people!"><meta property="og:site_name" content="I'm Jhey Tompkins"><meta property="og:title" content="How To: True Masonry Layout - I'm Jhey Tompkins"><meta name="image" content="../../assets/images/og/how-to-true-masonry-layout.png"><meta name="og:image" content="../../assets/images/og/how-to-true-masonry-layout.png"><meta property="og:type" content="website"><meta property="og:url" content="index.html"><meta name="twitter:title" content="How To: True Masonry Layout - I'm Jhey Tompkins"><meta name="twitter:description" content="I'm a developer that makes awesome things for awesome people!"><meta name="twitter:image" content="../../assets/images/og/how-to-true-masonry-layout.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@jh3yy"><link rel="icon" href="../../assets/icons/favicon-32x32.png" type="image/png" sizes="16x16"><link rel="shortcut icon" href="../../assets/icons/favicon-32x32.png"><link rel="apple-touch-icon" href="../../assets/icons/icon-192x192.png"><link rel="manifest" href="../../manifest.webmanifest"><script async="" src="../../../identity.netlify.com/v1/netlify-identity-widget.js"></script><noscript><style>.nav__button,.nav__settings,.search,.swapper__slider{display:none}</style></noscript><script>"use strict";window.LIGHT_QUERY=window.matchMedia("(prefers-color-scheme: light)"),window.THEMES={LIGHT:"LIGHT",DARK:"DARK",KEY:"THEME"},window.__setTheme=E=>{window.__THEME=E,document.documentElement.style.setProperty("--on",E===THEMES.DARK?0:1),window.localStorage.setItem(THEMES.KEY,E)};const stored=localStorage.getItem(THEMES.KEY);stored?(window.__THEME=stored,window.__setTheme(stored)):(window.LIGHT_QUERY.matches?window.__THEME=THEMES.LIGHT:window.__THEME=THEMES.DARK,window.__setTheme(window.__THEME)),window.INITIAL_THEME=window.__THEME&&window.__THEME===THEMES.LIGHT||window.localStorage.getItem(THEMES.KEY)&&window.localStorage.getItem(THEMES.KEY)===THEMES.LIGHT</script><style>*{-webkit-box-sizing:border-box;box-sizing:border-box}:root{--on:0;--nav-open:0;--sz-0:0.25rem;--sz-1:0.5rem;--sz-2:0.75rem;--sz-3:0.875rem;--sz-4:1rem;--sz-5:1.25rem;--sz-6:1.5rem;--sz-7:2rem;--sz-8:3rem;--sz-9:4rem;--sz-10:6rem;--sz-11:8rem;--sz-13:16rem;--sz-17:48rem;--tn-zp:0.1s;--tn-qu:0.2s;--max-width:var(--sz-17);--heading-size:2;--heading-line-height:0.9;--min-control-size:48px;--nav-height:80px;--nav-width:var(--sz-13);--bg:hsl(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc((10 + var(--on)*80)*1%));--bg-2:hsl(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc(var(--on)*100*1%));--bg-3:hsl(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc((3 + var(--on)*94)*1%));--color:hsl(0,0%,calc((96 - var(--on)*80)*1%));--color-2:hsl(0,0%,calc((70 - var(--on)*35)*1%));--border:hsla(0,0%,calc((100 - var(--on)*90)*1%),0.5);--accent:#dd3c3c;--accent-2:rgba(221,60,60,0.5)}@media (min-width:375px){:root{--heading-size:2.5}}@media (min-width:440px){:root{--heading-size:3}}@media (min-width:768px){:root{--heading-line-height:0.8;--heading-size:6}}@media (prefers-color-scheme:dark){:root{--on:0}}@media (prefers-color-scheme:light){:root{--on:1}}code:not([class]){color:var(--accent);background:var(--bg-3);padding:var(--sz-0)}code:not([class])::selection{color:var(--color)}code:not([class])::-moz-selection{color:var(--color)}html:focus-within{scroll-behavior:smooth}@media (prefers-reduced-motion){html:focus-within{scroll-behavior:auto}}body,html{background:var(--bg);color:var(--color);font-family:Inter,Nunito Sans,-apple-system,\.SFNSText-Regular,San Francisco,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:1.5;min-height:100vh;overflow-x:hidden;text-rendering:optimizeSpeed}body{font-size:var(--sz-4)}@media (min-width:768px){body{font-size:var(--sz-5)}}.layout{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100vh;padding:0 var(--sz-4)}.layout--nav{-webkit-transform:translate(calc(var(--nav-open)*var(--nav-width)));transform:translate(calc(var(--nav-open)*var(--nav-width)));-webkit-transition:-webkit-transform var(--tn-qu);transition:-webkit-transform var(--tn-qu);transition:transform var(--tn-qu);transition:transform var(--tn-qu),-webkit-transform var(--tn-qu)}@media (min-width:768px){.layout--nav{-webkit-transform:translate(0);transform:translate(0)}}.layout__hero{width:100%;padding-bottom:56.25%;position:relative;background:var(--bg-3);overflow:hidden}.layout__hero picture{position:absolute;width:100%;height:100%}footer,main{margin:0 auto;max-width:100%;width:100%}@media (min-width:768px){footer,main{max-width:var(--max-width)}}fieldset{padding:0;border:0}blockquote,body,figure,h1,h2,h3,h4,p{margin:0}p{margin-bottom:var(--sz-5)}main{-webkit-box-flex:1;-ms-flex:1;flex:1}.layout--nav main{padding-top:var(--nav-height)}h1,h2,h3,h4{line-height:1.1;outline:transparent}a{text-decoration:none}a:not([class]){text-decoration:underline;-webkit-text-decoration-color:var(--accent);text-decoration-color:var(--accent);-webkit-transition:background var(--tn-zp) linear;transition:background var(--tn-zp) linear;background:-webkit-gradient(linear,left top,left bottom,from(var(--color)),to(var(--color))) 50% 100%/100% 0 no-repeat;background:linear-gradient(var(--color),var(--color)) 50% 100%/100% 0 no-repeat}a:not([class]),a:not([class]):visited{color:var(--color)}a:not([class]):hover{background-size:100% 100%;color:var(--bg);-webkit-text-decoration-color:var(--bg);text-decoration-color:var(--bg)}::selection{background:var(--selection,var(--accent-2))}::-moz-selection{background:var(--selection,var(--accent-2))}textarea{height:140px}input[type=email],input[type=text],textarea{padding:var(--sz-4) var(--sz-4);border:2px solid var(--border);background:var(--bg-2);outline:transparent;color:var(--color)}input[type=email]:focus,input[type=text]:focus,textarea:focus{--border:var(--accent)}button,input{font-size:100%}article>*+*{margin-top:var(--sz-7)}article>h1:first-of-type{font-size:calc(var(--heading-size)*1rem);line-height:var(--heading-line-height);text-transform:uppercase;margin:var(--sz-7) 0}@media (min-width:768px){article>h1:first-of-type{margin:var(--sz-10) 0}}.md-b{position:relative;width:100%;background:var(--bg-3);padding-bottom:56.25%}.md-b_m{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;width:100%}[type=submit],button{--lightness:0;--hue:calc(200 - var(--on)*160);--saturation:calc((20 + var(--on)*50)*1%);--bg:hsl(var(--hue),var(--saturation),calc((var(--lightness, 0) + var(--on)*75)*1%));--border:hsla(0,0%,calc((100 - var(--on)*90)*1%),0.5);-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--bg);border:2px solid var(--border);color:var(--color);font-weight:700;outline-color:var(--accent)}[type=submit]:hover,button:hover{--lightness:20}[type=submit]:active,button:active{--lightness:10}.rss{display:inline-block;height:var(--sz-5);width:var(--sz-5);opacity:.5;position:absolute;bottom:calc(var(--heading-size)*1.1*.2rem);left:calc(100% + var(--sz-0))}.rss__hold{position:relative}.rss:hover{opacity:1}.rss svg{height:100%;width:100%;position:absolute}hr{margin:var(--sz-6) auto;opacity:.6;width:50%;clear:both}h2{font-size:var(--sz-7);margin:var(--sz-5) 0}@media (min-width:768px){h2{font-size:var(--sz-8)}}figure{margin:var(--sz-5) auto}figcaption{margin-top:var(--sz-1);text-align:center;font-size:var(--sz-3)}.hide{height:1px;width:1px;position:absolute;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}picture{display:block}picture img{height:100%;max-height:100%;max-width:100%;-o-object-fit:cover;object-fit:cover}@font-face{font-family:JetBrains Mono;src:url(../../JetBrainsMono-Regular.2c7b4557.woff2) format("woff2"),url(../../JetBrainsMono-Regular.4b8e6034.woff) format("woff"),url(../../JetBrainsMono-Variable.3cc1f995.ttf) format("ttf");font-display:swap}@font-face{font-family:Inter;src:url(../../Inter-VariableFont_slnt%2cwght.374f8963.ttf) format("ttf");font-display:swap}.shades{--x:0}.shades__frame{fill:#000}.shades__lens{fill:#202222}.shades__detail{fill:#e6e6e6}.shades__glare-container{-webkit-transform:translate(calc(var(--x,0)*1px));transform:translate(calc(var(--x,0)*1px));fill:#fff}.shades__code{-webkit-animation:code 2s linear infinite;animation:code 2s linear infinite}.code-bear .shades__lens{fill:#011627;opacity:.75}.code-bear .shades__glare-container{opacity:.25}.code-bear,.contact-bear{height:100%;width:100%;max-height:100%;max-width:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%) scale(.75);transform:translate(-50%,-50%) scale(.75)}.contact-bear .shades__glare-container{-webkit-animation:glare 3s linear infinite;animation:glare 3s linear infinite}.bear{overflow:visible!important}.bear--party-hover .party-lines{display:none}.bear--party-hover:hover .party-lines{-webkit-animation:party 1s linear infinite;animation:party 1s linear infinite;display:block}.bear__shades{opacity:var(--bear-shades,1)}.bear__tears{-webkit-transition:fill var(--tn-qu);transition:fill var(--tn-qu);fill:hsla(220,100%,65%,var(--bear-tears,0))}.bear__brows{-webkit-transition:stroke var(--tn-qu);transition:stroke var(--tn-qu);stroke:hsla(0,0%,0%,var(--bear-brows,1))}.bear__eye{-webkit-transition:-webkit-transform var(--tn-qu);transition:-webkit-transform var(--tn-qu);transition:transform var(--tn-qu);transition:transform var(--tn-qu),-webkit-transform var(--tn-qu);-webkit-transform:scaleY(var(--bear-eyes-open,.35));transform:scaleY(var(--bear-eyes-open,.35));-webkit-transform-origin:50% 52%;transform-origin:50% 52%;fill:hsla(0,0%,0%,var(--bear-eyes,1))}.bear__ear,.bear__head{fill:hsla(24,calc(var(--bear-saturation,100)*1%),25%,1)}.bear__ear-inner,.bear__muzzle{fill:hsla(24,calc(var(--bear-saturation,57)*1%),80%,1)}.bear__nose{fill:#0d0d0d}.bear__cap{fill:#0a0a0a}.bear__cap-strap{fill:hsla(10,calc(var(--bear-saturation,100)*1%),40%,1)}.bear__cap-strap--main{fill:hsla(10,calc(var(--bear-saturation,100)*1%),50%,1)}.bear__eye--teary{fill:hsla(200,100%,75%,calc(var(--bear-tears,0) - .5))}@-webkit-keyframes glare{0%{-webkit-transform:translate(-140px);transform:translate(-140px)}to{-webkit-transform:translate(280px);transform:translate(280px)}}@keyframes glare{0%{-webkit-transform:translate(-140px);transform:translate(-140px)}to{-webkit-transform:translate(280px);transform:translate(280px)}}@-webkit-keyframes party{to{-webkit-transform:translateY(-352.8px);transform:translateY(-352.8px)}}@keyframes party{to{-webkit-transform:translateY(-352.8px);transform:translateY(-352.8px)}}@-webkit-keyframes code{to{-webkit-transform:translateY(-240px);transform:translateY(-240px)}}@keyframes code{to{-webkit-transform:translateY(-240px);transform:translateY(-240px)}}.footer{color:var(--color);font-weight:700;padding:var(--sz-7) 0;font-size:var(--sz-3);text-align:center;width:100%;margin-bottom:var(--sz-4)}.footer span:first-of-type{display:none}@media (min-width:768px){.footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.footer span:first-child{display:inline-block;margin:0 var(--sz-4)}}.footer a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:50%;height:48px;width:48px}.footer a:hover{background:var(--color)}.footer a:hover path{fill:var(--accent)}.footer a svg{fill:var(--color);height:50%;width:50%}.footer__socials{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:var(--sz-1);-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media (min-width:768px){.footer__socials{margin:0}}.nav-control{height:var(--min-control-size);width:var(--min-control-size);position:absolute;font-size:0;color:transparent;background:0 0;border:0}.nav-control path,.nav-control span{display:none}.nav-control svg{height:60%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.nav{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:hsla(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc((10 + var(--on)*80)*1%),.9);display:-webkit-box;display:-ms-flexbox;display:flex;height:var(--nav-height);-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;left:0;margin:0 auto;position:fixed;right:0;top:0;-webkit-transform:translate(calc(var(--nav-open,0)*var(--nav-width)));transform:translate(calc(var(--nav-open,0)*var(--nav-width)));-webkit-transition:-webkit-transform var(--tn-qu);transition:-webkit-transform var(--tn-qu);transition:transform var(--tn-qu);transition:transform var(--tn-qu),-webkit-transform var(--tn-qu);z-index:2}@media (min-width:768px){.nav{-webkit-transform:translate(0);transform:translate(0)}}@media (min-width:1000px){.nav{padding:0}}.nav__content{background:var(--bg);bottom:0;-webkit-box-shadow:-5px 0 10px var(--bg-3) inset;box-shadow:-5px 0 10px var(--bg-3) inset;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100vh;padding:var(--sz-4);position:fixed;right:100%;top:0;width:var(--nav-width)}@media (min-width:768px){.nav__content{background:0 0;-webkit-box-shadow:none;box-shadow:none;height:100%;position:static;width:100%}}.nav__nav{max-width:var(--max-width);width:100%;margin:0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-ms-flex:1;flex:1}.nav__bear{height:var(--min-control-size);width:var(--min-control-size)}.nav__button{left:calc(100% + var(--sz-4));top:var(--sz-4)}.nav__cloak{position:fixed;top:0;right:0;bottom:0;left:0;z-index:10;display:none}.nav__toggle:checked~.layout--nav,.nav__toggle:checked~.nav,.nav__toggle:checked~.nav__cloak{-webkit-transform:translate(var(--nav-width));transform:translate(var(--nav-width))}.nav__toggle:checked~.nav .nav__toggle-control span:nth-of-type(2),.nav__toggle:checked~.nav__cloak{display:block}.nav__toggle:checked~.nav .nav__toggle-control span:first-of-type{display:none}@media (min-width:768px){.nav__toggle{display:none}}.nav__toggle-control{top:var(--sz-4);left:calc(100% + var(--sz-4))}.nav__toggle-control path:first-of-type,.nav__toggle-control span:first-of-type{display:block}.nav__toggle-control path:nth-of-type(2),.nav__toggle-control span:nth-of-type(2){display:none}@media (min-width:768px){.nav__toggle-control{display:none}}.nav__items{-webkit-box-flex:1;-ms-flex:1;list-style-type:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%}.nav__items>li{height:var(--min-control-size);line-height:var(--min-control-size)}.nav__items>li+li{margin-top:var(--sz-4)}@media (min-width:768px){.nav__items{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.nav__items>li{height:auto}.nav__items>li:first-child{display:none}.nav__items>li+li{margin-top:0}.nav__items>li+li:not(:nth-of-type(2)){margin-left:var(--sz-6)}}.nav__link{font-size:var(--sz-5);font-weight:700;text-decoration:none;color:var(--color-2)}.nav__link:hover{text-decoration:underline;color:var(--accent)}.nav__settings{--a:0;--rotate:calc(-180 + var(--a, 0)*180);--rotate:0;-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:relative}.nav__settings:before{content:"";height:500%;width:500%;-webkit-transform:translate(-50%,-50%) scale(var(--a));transform:translate(-50%,-50%) scale(var(--a));top:50%;left:50%;position:absolute;border-radius:50%;background:var(--bg-2);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;display:none}@media (min-width:768px){.nav__settings:before{display:block}}@media (min-width:768px){.nav__settings{height:var(--min-control-size);position:fixed;right:var(--sz-4);top:calc(var(--nav-height)/2);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;-webkit-transform:translateY(-50%) rotate(calc(var(--rotate)*1deg));transform:translateY(-50%) rotate(calc(var(--rotate)*1deg));width:var(--min-control-size)}}.nav__home{background:0 0;display:none;height:var(--min-control-size);width:var(--min-control-size);margin-right:var(--sz-4);position:relative;text-decoration:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.nav__home img{height:40px;width:40px;-o-object-fit:cover;object-fit:cover}@media (min-width:768px){.nav__home{display:-webkit-box;display:-ms-flexbox;display:flex}}@media (min-width:1000px){.nav__home{left:var(--sz-4);margin-right:0;position:fixed;top:calc(var(--nav-height)/2);-webkit-transform:translateY(-50%);transform:translateY(-50%)}}.settings-control,.settings-toggle{position:relative;margin-right:var(--sz-2)}@media (min-width:768px){.settings-control,.settings-toggle{margin-right:0;position:absolute}}.audio-toggle{--r:10}.theme-toggle{--r:80}.settings-toggle{display:none}@media (min-width:768px){.settings-toggle{display:block}}.settings-controls{display:-webkit-box;display:-ms-flexbox;display:flex}@media (min-width:768px){.settings-control{--t:calc(var(--a, 0)*150);--s:var(--a,0);top:50%;left:50%;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;-webkit-transform:translate(-50%,-50%) rotate(calc(var(--r)*1deg)) translateY(calc(var(--t)*1%)) rotate(calc((var(--r) + var(--rotate))*-1deg)) scale(var(--s));transform:translate(-50%,-50%) rotate(calc(var(--r)*1deg)) translateY(calc(var(--t)*1%)) rotate(calc((var(--r) + var(--rotate))*-1deg)) scale(var(--s))}}[aria-pressed=false] path:first-of-type,[aria-pressed=false] span:first-of-type,[aria-pressed=true] path:nth-of-type(2),[aria-pressed=true] span:nth-of-type(2){display:block}.fl{float:left;margin:var(--sz-7) var(--sz-5) var(--sz-5) 0}.fr{float:right;margin:var(--sz-7) 0 var(--sz-5) var(--sz-5)}.page-intro{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex}@media (min-width:440px){.page-intro{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}}@media (min-width:440px){.page-intro__intro{padding-right:var(--sz-2)}}.page-intro__img{position:relative;-webkit-box-flex:1;-ms-flex:1 0 40%;flex:1 0 40%;min-height:160px}.page-intro img{position:absolute;top:0;left:0;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}</style><style>code[class*=language-],pre[class*=language-]{color:#d6deeb;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:rgba(29,59,83,.99)}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:rgba(29,59,83,.99)}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{color:#fff;background:#011627}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#637777;font-style:italic}.token.punctuation{color:#c792ea}.namespace{color:#b2ccd6}.token.deleted{color:rgba(239,83,80,.56);font-style:italic}.token.property,.token.symbol{color:#80cbc4}.token.keyword,.token.operator,.token.tag{color:#7fdbca}.token.boolean{color:#ff5874}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.doctype,.token.selector{color:#c792ea;font-style:italic}.token.attr-name,.token.inserted{color:#addb67;font-style:italic}.language-css .token.string,.style .token.string,.token.entity,.token.string,.token.url{color:#addb67}.token.atrule,.token.attr-value,.token.class-name{color:#ffcb8b}.token.important,.token.regex,.token.variable{color:#d6deeb}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.post__aside{background:var(--bg-3);padding:var(--sz-6);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.post__aside svg{-webkit-box-flex:1;-ms-flex:1 0 var(--sz-8);flex:1 0 var(--sz-8);margin-right:var(--sz-2)}.post__aside svg path{fill:var(--accent)}.post__aside p{margin:0}.post__hero-credit{font-size:var(--sz-4);display:block;color:var(--color-2)}.post__content blockquote{border-left:solid var(--sz-0) var(--accent);padding:var(--sz-4);color:var(--color-2);background:var(--bg-2)}.post__content blockquote p{margin:0}.post__content img,.post__content video{max-width:100%;max-height:50vh;position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.post__content video{width:100%}table{margin:0 auto;border-collapse:collapse;font-size:var(--sz-4)}tbody,thead{--bg:hsl(0,0%,calc((var(--lightness, 70) + var(--on, 0)*20)*1%));--bd:hsl(0,0%,calc((40 + var(--on, 0)*20)*1%));background:var(--bg)}thead{--lightness:50}tbody{--lightness:70}td,th{border:2px solid var(--bd);padding:var(--sz-1)}.codeblock>code{width:100%;overflow:auto;display:inline-block;padding:var(--sz-2)}.codeblock__button{width:80px;border:0;background:hsl(207,95%,var(--lightness,8%))}.codeblock__button:hover{--lightness:20%}.codeblock__button:active{--lightness:10%}.codeblock__bar{--color:#d6deeb;color:var(--color);display:-webkit-box;display:-ms-flexbox;display:flex;height:var(--min-control-size);-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;border-bottom:1px solid #80a8ff;margin-bottom:var(--sz-2)}.codeblock__button,.codeblock__label{font-weight:700;text-transform:uppercase;font-size:var(--sz-3);font-family:JetBrains Mono,monospace}.codeblock__button{height:100%}.codeblock__label{line-height:var(--min-control-size);margin-right:var(--sz-2)}.codepen{background:var(--bg-2);border:0}.codepen span{padding:var(--sz-5);display:block}.twitter-tweet{margin:var(--sz-7) auto!important}.twitter-tweet iframe{max-width:100%}.post__details{font-size:var(--sz-4);margin-bottom:var(--sz-7);color:var(--color-2)}.post__details-icon{margin-right:var(--sz-2);height:var(--sz-6);width:var(--sz-6)}.post__details a,.post__details a:visited{color:var(--color-2)}.post__details a:hover{color:var(--bg)}.cp_embed_wrapper,.post__embed-container{width:100%;padding-bottom:56.25%;position:relative;min-height:160px}.cp_embed_wrapper{min-height:220px}.cp_embed_wrapper,.post__embed-container{margin:var(--sz-8) auto}.post__detail{display:-webkit-box;display:-ms-flexbox;display:flex}.post__detail-icon{height:var(--sz-6);width:var(--sz-6)}.cp_embed_iframe,.post__embed{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;width:100%}.post-heading{scroll-margin-top:var(--nav-height);position:relative;outline:transparent;font-size:var(--f,var(--sz-7))}.post-heading__content{position:relative;display:inline-block;padding-right:var(--sz-7)}.post-heading__permalink{height:var(--sz-7);width:var(--sz-7);opacity:.5;position:absolute;top:50%;right:0;-webkit-transform:translate(var(--sz-1),-50%);transform:translate(var(--sz-1),-50%);display:inline-block}.post-heading__permalink:hover{opacity:1}.post-heading__permalink svg{height:var(--sz-7);width:var(--sz-7);fill:var(--color);position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.post>h1:first-of-type,.post__content h2,.post__content h3,.post__content h4{--f:var(--fs,var(--sz-7));line-height:.95;font-size:var(--f);margin:var(--m,var(--sz-5)) auto var(--sz-4) auto}@media (min-width:768px){.post>h1:first-of-type,.post__content h2,.post__content h3,.post__content h4{--f:var(--fb,var(--sz-7))}}.post__content>*+*{margin-top:var(--sz-6)}.post>h1:first-of-type{--fs:var(--sz-6);--fb:var(--sz-8)}.post__content h2{--fs:var(--sz-6);--fb:var(--sz-7);--m:var(--sz-10)}.post__content h3{--fs:var(--sz-5);--fb:var(--sz-6);--m:var(--sz-8)}.post__content h4{--fs:var(--sz-4);--fb:var(--sz-5);--m:var(--sz-8)}pre.codeblock{padding:0}code[class*=language-],pre[class*=language-]{font-family:JetBrains Mono,monospace;font-size:var(--sz-4)}</style></head><body class="no-js"><input class="nav__toggle hide" id="nav-toggle" type="checkbox"><div class="nav"><div class="nav__content"><nav class="nav__nav"><a class="nav__home" href="../../index.html" data-sound="CLICK" data-sound-trigger="mousedown" title="Go Home"><span class="hide">Home</span><svg class="bear nav__bear bear--party-hover" viewBox="8 8 296 284" xmlns="http://www.w3.org/2000/svg"><defs><g class="shades__glare" id="partyBearglare"><path d="M89.037 77.41L50.307 216.33c7.356.405 14.995-.214 21.679-.449.327-.011.651-.04.979-.058l37.923-136.125c-4.114-.909-8.221-1.528-12.122-1.97-3.242-.13-6.485-.236-9.73-.316zm-9.634-2.19c-1.733.003-3.468 0-5.197.02-1.45.023-2.997.066-4.563.12L31.957 207.626c2.319 2.45 5.056 4.254 8.08 5.562L79.403 75.221z"></path></g><clipPath id="partyBearspectaclesLeft"><path transform="translate(-2 -1)" d="M63.208 104.241c-13.529.225-33.268.946-38.193 16.429-4.395 20.45-4.187 43.933 7.69 61.188 9.919 14.41 31.334 11.583 47.283 11.023 25.345-.889 47.122-20.629 53.854-44.776 2.588-10.397 5.238-15.686.934-25.992-10.264-12.007-26.954-15.795-41.01-17.39a595.341 595.341 0 00-30.558-.482z"></path></clipPath><clipPath id="partyBearspectaclesRight"><path transform="translate(-3 -1)" d="M236.518 104.241c13.529.225 33.268.946 38.195 16.429 4.393 20.45 4.184 43.933-7.693 61.188-9.918 14.41-31.333 11.583-47.281 11.023-25.346-.889-47.123-20.629-53.856-44.776-2.586-10.397-5.237-15.686-.933-25.992 10.264-12.007 26.956-15.795 41.01-17.39 10.18-.422 20.37-.583 30.558-.482z"></path></clipPath><g class="partyBear__party-block" id="partyBearrainbowBlock"><rect fill="#fa4d32" ry="0" y="79.4" x="182" height="12.6" width="159"></rect><rect fill="#fdb020" width="159" height="12.6" x="182" y="92" ry="0"></rect><rect fill="#fdf133" ry="0" y="104.6" x="182" height="12.6" width="159"></rect><rect fill="#1ce590" width="159" height="12.6" x="182" y="117.1" ry="0"></rect><rect fill="#13a1e3" ry="0" y="129.7" x="182" height="12.6" width="159"></rect><rect fill="#7e2ae4" width="159" height="12.6" x="182" y="142.3" ry="0"></rect><rect fill="#9e4ea5" ry="0" y="154.8" x="182" height="12.6" width="159"></rect></g><g id="partyBearparty"><use href="#partyBearrainbowBlock" transform=""></use><use href="#partyBearrainbowBlock" transform="" y="88.2"></use></g><clipPath id="partyBearheadClip"><path d="M40 29C22 29 8 43 8 60c0 16 12 29 28 31-7 15-11 35-11 58 0 82 50 142 122 142 71 0 127-60 127-142 0-23-5-43-12-58 16-2 28-15 28-31 0-17-14-31-32-31-15 0-28 10-31 24-22-14-49-20-80-20-30 0-56 6-77 19-3-13-16-23-30-23z"></path></clipPath></defs><path class="bear__head" d="M274.479 149.029c0 82.141-55.472 142.532-126.957 142.532-71.486 0-122-60.391-122-142.532 0-82.142 50.514-115.264 121.999-115.264 71.486 0 126.957 33.122 126.957 115.263l.001.001z"></path><path class="bear__ear" d="M40.442 91.262c17.6 0 31.866-13.876 31.866-30.993 0-17.117-14.267-30.993-31.866-30.993S8.576 43.152 8.576 60.269c0 17.117 14.267 30.993 31.866 30.993z"></path><path class="bear__ear" d="M258.951 91.262c-17.599 0-31.866-13.876-31.866-30.993 0-17.117 14.267-30.993 31.866-30.993s31.866 13.876 31.866 30.993c0 17.117-14.267 30.993-31.866 30.993z"></path><g clip-path="url(#partyBearheadClip)"><g transform="rotate(-45)"><g class="party-lines"><use transform="translate(-1000 -300) scale(4 4)" height="100%" width="100%" href="#partyBearparty"></use></g></g></g><path class="bear__muzzle" d="M233.045 235.173c0 26.696-37.734 52.058-84.285 52.058-46.548 0-81.804-25.362-81.804-52.06 0-26.696 35.256-44.62 81.804-44.62 46.551 0 84.285 17.924 84.285 44.622z"></path><path class="bear__nose" d="M189.044 199.847c0 10.268-25.534 32.846-40.594 32.846-15.06 0-43.07-22.578-43.07-32.846 0-10.269 28.012-16.732 43.072-16.732 15.06 0 40.593 6.463 40.593 16.732h-.001z"></path><path class="bear__ear-inner" d="M62.543 58.438c-.471-5.386-3.004-10.404-7.096-14.062-4.092-3.658-9.447-5.69-15.005-5.693-5.886 0-11.53 2.275-15.692 6.323-4.162 4.047-6.5 9.537-6.5 15.262 0 2.834.574 5.64 1.69 8.26a21.554 21.554 0 004.81 7.002 22.245 22.245 0 007.2 4.68 22.74 22.74 0 0010.01 1.59c1.093-1.792 2.122-3.656 3.314-5.34a88.09 88.09 0 016.779-8.426 87.952 87.952 0 017.661-7.44c.896-.773 1.9-1.42 2.829-2.156z"></path><path class="bear__ear-inner" d="M236.852 58.438c.471-5.386 3.003-10.404 7.096-14.062 4.092-3.658 9.447-5.69 15.005-5.693 5.886 0 11.53 2.275 15.692 6.323 4.161 4.047 6.499 9.537 6.499 15.262a21.06 21.06 0 01-1.688 8.26 21.565 21.565 0 01-4.811 7.003 22.254 22.254 0 01-7.2 4.679 22.74 22.74 0 01-10.01 1.59c-1.095-1.792-2.122-3.656-3.315-5.34a88.105 88.105 0 00-6.779-8.426 88.163 88.163 0 00-7.66-7.44c-.899-.773-1.902-1.42-2.83-2.156h.001z"></path><path class="bear__cap-strap bear__cap-strap--main" d="M146.958 43.742c-17.965 0-34.897 1.447-50.519 4.47v15.226c15.622-3.024 32.554-4.471 50.519-4.471 20.255 0 39.506 1.841 57.218 5.707V49.447c-17.712-3.867-36.964-5.705-57.218-5.705z"></path><path class="bear__cap-strap" d="M170.378 44.62c3.81 1.951 5.939 4.552 5.941 7.258-.006 1.49-.656 2.96-1.908 4.316-1.252 1.356-3.077 2.565-5.353 3.547 12.225.875 23.975 2.502 35.117 4.935v-15.23c-10.738-2.343-22.047-3.93-33.797-4.827v.001z"></path><path class="bear__cap" d="M147.837 8.445C89.515 8.445 46.163 33.04 36.223 92.55 52.748 78.447 73.134 69.01 96.44 63.703c0 0-3.666-18.477 13.746-21.495 17.411-3.018 18.808-5.364 36.773-5.364 20.254 0 22.023.59 41.125 5.364 19.103 4.775 16.092 22.95 16.092 22.95 23.09 5.928 43.562 15.91 60.213 30.454-9.756-61.728-57.241-87.167-116.552-87.167z"></path><g class="bear__shades shades"><path class="shades__frame" d="M52.493 96.378c-8.728-.094-17.92.244-30.576 2.858l-19.201 3.713 3.095 20.167c2.808.393 6.684 1.362 8.518 3.819 4.731 6.333 1.612 12.453 2.686 23.636 3.58 37.256 15.986 45.054 35.199 47.295 10.06 1.173 30.597 3.06 44.63-1.922 12.681-4.502 24.438-13.233 32.397-24.085 8.414-11.47 9.318-24.715 14.541-34.76 3.701-7.121 10.326-5.077 12.415.523 3.958 10.608 5.873 22.767 14.287 34.237 7.959 10.852 19.716 19.583 32.398 24.085 14.031 4.982 34.568 3.095 44.629 1.922 19.212-2.241 31.619-10.039 35.201-47.295 1.074-11.183-2.045-17.303 2.686-23.636 1.896-2.538 5.985-3.501 8.807-3.869l3.08-20.065-19.474-3.765c-20.25-4.184-31.637-2.535-46.432-2.625-5.489-.033-11.77.155-17.616.769-10.896 1.146-21.692 3.194-32.418 5.431-10.712 2.233-20.906 8.18-31.846 7.969-10.551-.206-20.07-6.675-30.394-8.873-10.905-2.322-19.88-4.165-33.141-4.527-6.429-.174-12.127-.802-17.616-.769-5.548.035-10.618-.177-15.855-.233z"></path><path class="shades__lens shades__lens--left" d="M63.208 104.241c-13.529.225-33.268.946-38.193 16.429-4.395 20.45-4.187 43.933 7.69 61.188 9.919 14.41 31.334 11.583 47.283 11.023 25.345-.889 47.122-20.629 53.854-44.776 2.588-10.397 5.238-15.686.934-25.992-10.264-12.007-26.954-15.795-41.01-17.39a595.341 595.341 0 00-30.558-.482z"></path><path class="shades__detail" d="M23.995 109.374c0 .6-.572 1.175-1.592 1.601-1.02.425-2.404.665-3.85.668-1.446.003-2.836-.231-3.866-.652-1.03-.421-1.617-.994-1.632-1.594-.015-.6.543-1.178 1.552-1.608 1.01-.43 2.389-.676 3.835-.685 1.446-.009 2.842.219 3.883.636 1.04.417 1.64.987 1.67 1.587"></path><path class="shades__lens shades__lens--right" d="M236.518 104.241c13.529.225 33.268.946 38.195 16.429 4.393 20.45 4.184 43.933-7.693 61.188-9.918 14.41-31.333 11.583-47.281 11.023-25.346-.889-47.123-20.629-53.856-44.776-2.586-10.397-5.237-15.686-.933-25.992 10.264-12.007 26.956-15.795 41.01-17.39 10.18-.422 20.37-.583 30.558-.482z"></path><path class="shades__detail" d="M275.731 109.374c0 .6.572 1.175 1.592 1.601 1.02.425 2.404.665 3.85.668 1.446.003 2.836-.231 3.867-.652 1.03-.421 1.616-.994 1.631-1.594.016-.6-.543-1.178-1.552-1.608-1.01-.43-2.389-.676-3.835-.685-1.446-.009-2.842.219-3.882.636-1.041.417-1.641.987-1.67 1.587"></path><g clip-path="url(#partyBearspectaclesLeft)"><g class="shades__glare-container"><use href="#partyBearglare"></use></g></g><g clip-path="url(#partyBearspectaclesRight)"><g class="shades__glare-container"><use href="#partyBearglare"></use></g></g></g></svg></a><label class="nav__toggle-control nav-control" for="nav-toggle"><span>Menu Collapsed</span><span>Menu Expanded</span><svg class="nav__icon" viewBox="0 0 24 24" role="img"><title>Menu icon</title><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path></svg></label><button class="nav__button nav-control" aria-haspopup="true" aria-expanded="false" aria-controls="nav" aria-pressed="false"><span>Menu Collapsed</span><span>Menu Expanded</span><svg class="nav__icon" viewBox="0 0 24 24" role="img"><title>Menu icon</title><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path></svg></button><ul class="nav__items" id="nav"><li><a class="nav__link" href="../../index.html" data-sound="CLICK" data-sound-trigger="mousedown">Home</a></li><li><a class="nav__link" href="../../index.html#" data-sound="CLICK" data-sound-trigger="mousedown">Home</a></li><li><a class="nav__link" href="../index.html" data-sound="CLICK" data-sound-trigger="mousedown">Writing</a></li><li><a class="nav__link" href="../../scrapbook/index.html" data-sound="CLICK" data-sound-trigger="mousedown">Scrapbook</a></li><li><a class="nav__link" href="../../code/index.html" data-sound="CLICK" data-sound-trigger="mousedown">Code</a></li><li><a class="nav__link" href="../../about/index.html" data-sound="CLICK" data-sound-trigger="mousedown">About</a></li><li><a class="nav__link" href="../../contact/index.html" data-sound="CLICK" data-sound-trigger="mousedown">Contact</a></li></ul></nav><aside class="nav__settings"><button class="settings-toggle nav-control" aria-expanded="false" aria-haspopup="true" aria_controls="settings" aria-pressed="false" data-sound="SWITCH_ON" data-sound-trigger="mousedown"><span class="hide">Settings closed</span><span class="hide">Settings open</span><svg viewBox="0 0 24 24" role="img"><title>Settings icon</title><path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" fill="var(--color)"></path><path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" fill="var(--color)"></path></svg></button><div class="settings-controls" id="settings"><button class="settings-control audio-toggle nav-control" aria-pressed="false" data-sound="PHASER_DOWN" data-sound-trigger="mousedown"><span class="hide">Audio on</span><span class="hide">Audio off</span><svg viewBox="0 0 24 24" role="img"><title>Audio icon</title><path d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z" fill="var(--color)"></path><path d="M12,4L9.91,6.09L12,8.18M4.27,3L3,4.27L7.73,9H3V15H7L12,20V13.27L16.25,17.53C15.58,18.04 14.83,18.46 14,18.7V20.77C15.38,20.45 16.63,19.82 17.68,18.96L19.73,21L21,19.73L12,10.73M19,12C19,12.94 18.8,13.82 18.46,14.64L19.97,16.15C20.62,14.91 21,13.5 21,12C21,7.72 18,4.14 14,3.23V5.29C16.89,6.15 19,8.83 19,12M16.5,12C16.5,10.23 15.5,8.71 14,7.97V10.18L16.45,12.63C16.5,12.43 16.5,12.21 16.5,12Z" fill="var(--color)"></path></svg></button><button class="settings-control nav-control theme-toggle" aria-pressed="false" data-sound="SWITCH_ON" data-sound-trigger="mousedown"><span class="hide">Light theme</span><span class="hide">Dark theme</span><svg class="theme-toggle__icon" viewBox="0 0 24 24" role="img"><title>Theme icon</title><path d="M3.55,18.54L4.96,19.95L6.76,18.16L5.34,16.74M11,22.45C11.32,22.45 13,22.45 13,22.45V19.5H11M12,5.5A6,6 0 0,0 6,11.5A6,6 0 0,0 12,17.5A6,6 0 0,0 18,11.5C18,8.18 15.31,5.5 12,5.5M20,12.5H23V10.5H20M17.24,18.16L19.04,19.95L20.45,18.54L18.66,16.74M20.45,4.46L19.04,3.05L17.24,4.84L18.66,6.26M13,0.55H11V3.5H13M4,10.5H1V12.5H4M6.76,4.84L4.96,3.05L3.55,4.46L5.34,6.26L6.76,4.84Z" fill="var(--color)"></path><path d="M9,2C7.95,2 6.95,2.16 6,2.46C10.06,3.73 13,7.5 13,12C13,16.5 10.06,20.27 6,21.54C6.95,21.84 7.95,22 9,22A10,10 0 0,0 19,12A10,10 0 0,0 9,2Z" fill="var(--color)"></path></svg></button></div></aside></div></div><label class="nav__cloak" aria-hidden="true" for="nav-toggle"></label><div class="layout layout--nav"><main><div class="layout__hero"><picture><source type="image/avif" srcset="/assets/enhanced/8079e462-768.avif 768w" sizes="768px"><source type="image/webp" srcset="/assets/enhanced/8079e462-768.webp 768w" sizes="768px"><img src="../../assets/enhanced/8079e462-768.png" width="768" height="1024" alt="" loading="lazy" decoding="async"></picture></div><article class="post"><h1 class="post__title">How To: True Masonry Layout</h1><div class="post__details"><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M14,14H7V16H14M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M17,10H7V12H17V10Z" fill="var(--color)"></path></svg><span class="post__detail-content">Apr 16, 2017</span></div><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M6.5 10C7.3 10 8 9.3 8 8.5S7.3 7 6.5 7 5 7.7 5 8.5 5.7 10 6.5 10M9 6L16 13L11 18L4 11V6H9M9 4H4C2.9 4 2 4.9 2 6V11C2 11.6 2.2 12.1 2.6 12.4L9.6 19.4C9.9 19.8 10.4 20 11 20S12.1 19.8 12.4 19.4L17.4 14.4C17.8 14 18 13.5 18 13C18 12.4 17.8 11.9 17.4 11.6L10.4 4.6C10.1 4.2 9.6 4 9 4M13.5 5.7L14.5 4.7L21.4 11.6C21.8 12 22 12.5 22 13S21.8 14.1 21.4 14.4L16 19.8L15 18.8L20.7 13L13.5 5.7Z" fill="var(--color)"></path></svg><span class="post__detail-content"><a href="../index06ac.html?tag=css">Css</a><span>, </span><a href="../indexc2d0.html?tag=javascript">Javascript</a><span>, </span><a href="../indexe036.html?tag=design">Design</a></span></div><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z" fill="var(--color)"></path></svg><span class="post__detail-content">~12min</span></div><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" fill="#1da1f2"></path></svg><a href="https://twitter.com/intent/tweet?text=How%20To:%20True%20Masonry%20Layout%20https://jhey.dev/writing/how-to-true-masonry-layout/%20via%20@jh3yy" target="_blank" rel="noopener noreferrer">Share on Twitter</a></div></div><div class="post__content"><p>I’ve previously written about achieving the masonry layout effect and how to implement a pure CSS solution leveraging various techniques (<em>that can be seen <a href="../how-to-pure-css-masonry-layout/index.html">here</a></em>).</p><p class="codepen" data-theme-id="dark" data-default-tab="result" data-user="jh3y" data-slug-hash="mPgyqw" data-preview="true" data-editable="true"><span>Check out <a href="https://codepen.io/jh3y/pen/mPgyqw" target="_blank" rel="noopener noreferrer">this pen</a> by Jhey (<a href="https://codepen.io/jh3y" target="_blank" rel="noopener noreferrer">@jh3y</a>) on <a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen</a>.</span></p><script async="" src="../../../cpwebassets.codepen.io/assets/embed/ei.js"></script><p>The biggest drawback with a pure CSS solution is ordering. Most people implementing a masonry layout in their projects want the classic left to right chronological ordering. It’s a common question about the pure CSS solution, “How can I order the items from left to right, 1, 2, 3?”. Unfortunately, this just doesn’t seem possible with a pure CSS solution. Not in a generic and dynamic sense at least 👎</p><p>So how can we create this “true” masonry layout with the correct ordering? We can still leverage CSS features but we’re going need a hint of JavaScript to get it just right 😎</p><p>For those in camp <strong>TL;DR</strong> who want to see this “true” masonry layout in action, here’s a demo 🤓</p><p>If you scroll to the bottom, you can see a demo with React and also a demo with loading images 😉</p><p class="codepen" data-theme-id="dark" data-default-tab="result" data-user="jh3y" data-slug-hash="vgZWZL" data-preview="true" data-editable="true"><span>Check out <a href="https://codepen.io/jh3y/pen/vgZWZL" target="_blank" rel="noopener noreferrer">this pen</a> by Jhey (<a href="https://codepen.io/jh3y" target="_blank" rel="noopener noreferrer">@jh3y</a>) on <a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen</a>.</span></p><script async="" src="../../../cpwebassets.codepen.io/assets/embed/ei.js"></script><h2 class="post__heading post-heading" tabindex="-1" id="using-flexbox-in-a-solution"><span class="post-heading__content">Using Flexbox in a&nbsp;solution <a href="#using-flexbox-in-a-solution" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Previously, when exploring a pure CSS solution, I settled on using multi-column layout properties and using flexbox for clustering.</p><p>My thoughts about using flexbox alone lead me to believe I’d find issues regarding the height and wrap of the layout when using <code>flex-direction: column</code></p><blockquote><p>On first attempt I thought about mimicking the column layout by using “<em>flex-direction: column</em>”.The issue with using “<em>column</em>” is that you need to define a height for the layout so that columns start wrapping&nbsp;..… or you need to keep adjusting the height of the layout until everything wraps and fits nicely how you want it to. If you are working with dynamic content that may vary in amount and size over time, you may find yourself adjusting to accommodate each time you roll it out.</p></blockquote><p>If we introduce JavaScript, the issue of needing to adjust <code>height</code> becomes moot as we can react to changes in content and container size 🎉</p><hr><p>So let’s begin looking at a solution. We’ll make the journey getting more complex as we go along (<em>spoiler: it never gets that complex</em>). We will start with the markup, then the CSS and lastly how we make it all work with that hint of JavaScript.</p><hr><h2 class="post__heading post-heading" tabindex="-1" id="the-markup"><span class="post-heading__content">The markup <a href="#the-markup" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Let’s begin by defining some markup. Nothing crazy here, a container with panels 👍</p><pre class="language-html codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">html</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span></code></pre><p>We have <code>masonry</code> class for our container, <code>masonry-panel</code> for our panels and <code>masonry-panel__content</code> for panel content.</p><p>For the demo, I decided to generate a random layout with panels of different sizes using <code>pug</code></p><pre class="language-pug codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">pug</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-pug"><span class="highlight-line"><span class="token tag"><span class="token attr-class">.masonry</span></span></span>
<span class="highlight-line">  <span class="token punctuation">-</span><span class="token code"> <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span></span></span>
<span class="highlight-line">  <span class="token flow-control"><span class="token branch keyword">while</span> n <span class="token operator">&lt;</span> <span class="token number">16</span></span></span>
<span class="highlight-line">    <span class="token punctuation">-</span><span class="token code"> <span class="token keyword">var</span> size <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">450</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token attr-class">.masonry-panel</span></span></span>
<span class="highlight-line">      <span class="token tag"><span class="token attr-class">.masonry-panel__content</span><span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">style</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">height: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span></span><span class="token punctuation">)</span></span></span></span>
<span class="highlight-line">        <span class="token tag">h1</span><span class="token punctuation">=</span><span class="token code"> n</span></span>
<span class="highlight-line">    <span class="token punctuation">-</span><span class="token code"> n<span class="token operator">++</span></span></span></code></pre><p>We will look at adding images and dynamic content later on 😉</p><h2 class="post__heading post-heading" tabindex="-1" id="the-css"><span class="post-heading__content">The CSS <a href="#the-css" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>The CSS is quite simple but we will leverage a trick with the <code>flexbox</code> properties. Let’s start with the container.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.masonry</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">flex-flow</span><span class="token punctuation">:</span> column wrap<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>The container is the top level element for our masonry layout. We are using <code>flexbox</code> so we need <code>display: flex</code>. <code>max-width</code> is set to ensure our layout doesn’t overflow. Last, we define the <code>flex-flow</code>. We want our content to wrap so we have set <code>flex-wrap</code> to <code>wrap</code> and we want the <code>flex-direction</code> to be <code>column</code> and not <code>row</code>. You might question the <code>flex-direction</code>. If we want our content to read from left to right then how is that possible using <code>flex-direction: column</code>? This is where we leverage the trick with <code>flexbox</code> properties.</p><p>We are going to use the <code>order</code> property to define the order in which are <code>masonry-panel</code>s will render within the layout. If you’re not familiar with the <code>order</code> property</p><blockquote><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS" target="_blank" rel="noopener noreferrer">CSS</a> <code>order</code> property specifies the order used to lay out flex items in their flex container. Elements are laid out in the ascending order of the <code>order</code> value. Elements with the same <code>order</code>value are laid out in the order in which they appear in the source code. — <a href="https://developer.mozilla.org/en/docs/Web/CSS/order" target="_blank" rel="noopener noreferrer">MDN</a></p></blockquote><p>So what does that allow us to do? When we develop our markup, it’s likely to be in the order that we want it to display.</p><pre class="language-html codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">html</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masonry-panel__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span></code></pre><p><img src="../../../cdn-images-1.medium.com/max/600/1_6Of1_Wzmh5L_wDP6q17xhw.png" alt="How our panels might look to start"></p><p>We haven’t touched on the <code>height</code> of the container yet, we will. A set <code>height</code> must be in place to make the columns wrap. If there is no set <code>height</code> then the columns will never wrap 😭. Let’s run through a quick example. Consider a layout where the panels are <code>100px</code> high and wide. Our container is <code>200px</code> high and wide and we have four panels.</p><p>When we don’t alter the <code>order</code>, the result will be that we get <code>1</code> and <code>2</code> in our first column and <code>3</code> and <code>4</code> in our second column. Well that’s no good 👎</p><p><img src="../../../cdn-images-1.medium.com/max/600/1_avhygM3r80Oetc__BRwN-Q.png" alt="Panels with desired ordering"></p><p>The desired effect we want is <code>1</code> and <code>3</code> in the first column and the <code>2</code> and <code>4</code> in the second column. How can you calculate the order for each panel though? You don’t need to calculate the exact <code>order</code>. If we remember that items with the same <code>order</code> are laid out in the order they appear in the DOM then all we need to worry about is which column we want each item to appear in 🙌</p><p>To illustrate this, consider the following. Instead of the the DOM order illustrated in the square, we render the <code>order</code> property value. Each panel in column one has the value <code>1</code>. And each in column two has the value <code>2</code>.</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_VKq9ZbNAGSFXOeOwYaaSuA.png" alt="How &quot;order&quot; can dictate the correct column for a panel"></p><p>We can either set the <code>order</code> within our <code>CSS</code> or leave it and set it within our <code>JavaScript</code>. The latter will be easier if you’re not using a <code>CSS</code> preprocessor. For those using a <code>CSS</code> preprocessor, it is possible. But might be a little more complicated than doing so within <code>JavaScript</code>. We need to set the <code>order</code> for each panel based on the desired number of columns for each desired breakpoint. You can see this in the demo pen using <code>stylus</code>.</p><p>The only other properties we need to set for our <code>masonry-panel</code> are <code>width</code> and <code>overflow</code>. We set the <code>overflow</code> to <code>hidden</code> to make sure that panel content doesn’t spill out. The <code>width</code> is based on how many columns we want in our layout. Let’s consider a four column layout, that requires a <code>25%</code> width for panels.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.masonry-panel</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">width</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>In order to go responsive(<em>more on this at the end</em>), we would set different <code>width</code>s and <code>order</code>s at different breakpoints. Commonly, on mobile devices we will only want one column. You might be developing mobile first, so you may have something like</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.masonry-panel</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">order</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token atrule"><span class="token rule">@media</span><span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">.masonry-panel</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token property">width</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
  <span class="token selector">.masonry-panel:nth-of-type(1),
  .masonry-panel:nth-of-type(5)</span> <span class="token punctuation">{</span>
<span class="highlight-line">    <span class="token property">order</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
  <span class="token selector">.masonry-panel:nth-of-type(2),
  .masonry-panel:nth-of-type(6)</span> <span class="token punctuation">{</span>
<span class="highlight-line">    <span class="token property">order</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Setting responsive <code>order</code> and <code>width</code> is likely easier if leveraging a <code>CSS</code> preprocessor. If you’re not using a <code>CSS</code> preprocessor, you could set the responsive order from <code>JavaScript</code>. This would entail setting an inline <code>order</code> on <code>window</code> resize based on some given settings.</p><p>Any other <code>CSS</code> we put in place on the <code>CSS</code> side is for theming and aesthetics. For example, we may set <code>padding</code> on the panel content to give a gutter like effect.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.masonry-panel__content</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Or we may wish to make our panels have animated entrances in order. This can be achieved with a <code>CSS</code> preprocessor as follows</p><pre class="language-stylus codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">stylus</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-stylus"><span class="highlight-line"><span class="token selector">.masonry-panel</span></span>
<span class="highlight-line">  <span class="token property-declaration"><span class="token property">animation</span> scaleIn <span class="token number">0.25</span><span class="token unit">s</span> both</span></span>
<span class="highlight-line">  <span class="token statement"><span class="token keyword">for</span> $panel <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span>$numberOfPanels<span class="token punctuation">)</span></span></span>
<span class="highlight-line">    <span class="token selector">&amp;:nth-child(<span class="token interpolation variable"><span class="token delimiter punctuation">{</span>$panel<span class="token delimiter punctuation">}</span></span>)</span></span>
<span class="highlight-line">      <span class="token property-declaration"><span class="token property">animation-delay</span> <span class="token punctuation">(</span>$panel <span class="token operator">*</span> <span class="token number">0.15</span><span class="token unit">s</span><span class="token punctuation">)</span></span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token atrule-declaration"><span class="token atrule">@keyframes</span> scaleIn</span></span>
<span class="highlight-line">  <span class="token selector">from</span></span>
<span class="highlight-line">    <span class="token property-declaration"><span class="token property">transform</span> <span class="token func"><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span></span></span></code></pre><h2 class="post__heading post-heading" tabindex="-1" id="the-javascript"><span class="post-heading__content">The JavaScript <a href="#the-javascript" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Last but not least is the <code>JavaScript</code>. We need the script in order to react to changes in viewport size and also to initially set up the layout by setting the correct <code>height</code> for our container.</p><p>So, let’s get started by creating a class for our layout.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token constant">CLASSES</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token constant">MASONRY</span><span class="token operator">:</span> <span class="token string">'masonry'</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token constant">PANEL</span>  <span class="token operator">:</span> <span class="token string">'masonry-panel'</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token constant">PAD</span>    <span class="token operator">:</span> <span class="token string">'masonry-pad'</span><span class="token punctuation">,</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">Masonry</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>container <span class="token operator">=</span> el</span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>panels <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">PANEL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Our class will take an <code>element</code> as its parameter. This element will be the containing element. It will keep a reference of the container and panels using internal references. We instantiate a <code>state</code> object for keeping a reference to the layout and content height.</p><p>Our first step is to start the layout but first a quick note on setting the <code>order</code>.</p><p>I prefer to set the order of panels via <code>CSS</code> in this example. This is so that I don’t need to keep reference and make checks within the <code>JavaScript</code> to media queries etc.</p><p>If we are going to set the <code>order</code> of our panels via <code>JavaScript</code>. This is a basis for how we could do it.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">setOrders</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    panels</span>
<span class="highlight-line">  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token comment">// There needs to be an internal reference here that</span></span>
<span class="highlight-line">  <span class="token comment">// checks how many cols for viewport size</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> cols <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="highlight-line">  panels<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">panel<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    panel<span class="token punctuation">.</span>style<span class="token punctuation">.</span>order <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> cols <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> cols <span class="token operator">:</span> <span class="token punctuation">(</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> cols</span>
<span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>We would need some way of storing the Masonry settings though in some form of options <code>Object</code>. I’ve tackled a <code>JavaScript</code> which I detail later in this article. The <code>React</code> version I put together below also uses a <code>JavaScript</code> solution 👍</p><p><strong>NOTE::</strong> If using IE, you’ll need to use something like a <code>for</code> loop to iterate over that <code>NodeList</code> for <code>panels</code> else it won’t work.</p><p>Once <code>order</code> is out of the way let’s get under way with setting up the layout.</p><p>We create a <code>layout</code> method in the class that will be responsible for running individual tasks that sort the layout.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">layout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">populateHeights</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pad</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>This method will be invoked from within the constructor and also on viewport size changes to reset and initialize the layout.</p><p>Let’s go through these individual methods one by one.</p><h3 class="post__heading post-heading" tabindex="-1" id="reset"><span class="post-heading__content">reset <a href="#reset" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h3><p>A reset method for each time we want to re-layout. We use this method to reset internal state, reset styles and remove padding elements. More on padding elements when we get to the <code>pad</code> method*.*</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">reset</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> container <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>heights <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> fillers <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">PAD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>fillers<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> f <span class="token operator">&lt;</span> fillers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> f<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">      fillers<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>fillers<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  container<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p><strong>UPDATE::</strong> It was brought to my attention that the first iteration of this code wouldn’t play nice in IE. That was due to using <code>forEach</code> on a <code>NodeList</code> and also making use of <code>remove</code> on elements. The workaround has been to revert to using a <code>for</code> loop and use <code>parentNode.removeChild</code>. Sorry for any issues this caused 😇</p><h3 class="post__heading post-heading" tabindex="-1" id="populateheights"><span class="post-heading__content">populateHeights <a href="#populateheights" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h3><p>This method is where we determine the <code>height</code> of our content.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">populateHeights</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> panels<span class="token punctuation">,</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> heights <span class="token punctuation">}</span> <span class="token operator">=</span> state</span>
<span class="highlight-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> p <span class="token operator">&lt;</span> panels<span class="token punctuation">.</span>length<span class="token punctuation">;</span> p<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> panel <span class="token operator">=</span> panels<span class="token punctuation">[</span>p<span class="token punctuation">]</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> order<span class="token operator">:</span> cssOrder<span class="token punctuation">,</span> msFlexOrder<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>panel<span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> order <span class="token operator">=</span> cssOrder <span class="token operator">||</span> msFlexOrder</span>
<span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>heights<span class="token punctuation">[</span>order <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> heights<span class="token punctuation">[</span>order <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="highlight-line">    heights<span class="token punctuation">[</span>order <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>We iterate through the panel elements and get the computed style for each. For each <code>height</code> we need to add this to a height reference array. We know which reference in the <code>height</code> array to add the <code>height</code> to based on the <code>order</code> property of the panel.</p><p>For an example; we have a four column layout so heights will start out as</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span></span></code></pre><p>We get to the first panel, it has <code>height</code> of <code>75</code>. This gives us</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">[</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span></span></code></pre><p>When we’ve added the <code>height</code> for our second, third and fourth panel, we get back to another panel with <code>order</code> of <code>1</code> so we need to add that <code>height</code> onto the first <code>height</code>. Consider it has a <code>height</code> of <code>25</code>, then <code>heights[0]</code> becomes <code>100</code></p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token punctuation">[</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span> <span class="token punctuation">]</span></span></code></pre><p>Once we have the heights of each column we just need to set the layout correctly based on this.</p><h3 class="post__heading post-heading" tabindex="-1" id="setlayout"><span class="post-heading__content">setLayout <a href="#setlayout" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h3><p>This likely doesn’t need its own method but feels nicer to have that separation of concerns. In this method we simply set the <code>height</code> of the container based on the column heights.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">setLayout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> container<span class="token punctuation">,</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> heights <span class="token punctuation">}</span> <span class="token operator">=</span> state</span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>maxHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>heights<span class="token punctuation">)</span></span>
<span class="highlight-line">  container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>maxHeight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>This will get you pretty much there. The layout will work now 🎉 but not in every scenario 👎</p><h3 class="post__heading post-heading" tabindex="-1" id="pad"><span class="post-heading__content">pad <a href="#pad" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h3><p>This is where the concept of padding comes in. Currently, we have our content within the fixed height container. The height has been set based on the content height. But, it’s likely that the columns aren’t all the same height. The tallest column content won’t spill out. But, there are scenarios where the other columns could have content that spills. This isn’t the desired effect.</p><p>So how can we combat this? The solution for me has been to introduce padding elements. These fill out the remaining space in a column that is not as tall as the tallest column. The following image illustrates padding filling out the shorter columns (<em>padding is orange</em>)</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_1Iy4S_zjgALPaxZP5rZPJg.png" alt="Padded columns to create equal heights"></p><p>So what does the code for <code>pad</code> look like?</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">pad</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> container <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> heights<span class="token punctuation">,</span> maxHeight <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state</span>
<span class="highlight-line">  heights<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">height<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>height <span class="token operator">&lt;</span> maxHeight <span class="token operator">&amp;&amp;</span> height <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">      <span class="token keyword">const</span> pad <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span></span>
<span class="highlight-line">      pad<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">PAD</span></span>
<span class="highlight-line">      pad<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>maxHeight <span class="token operator">-</span> height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span></span>
<span class="highlight-line">      pad<span class="token punctuation">.</span>style<span class="token punctuation">.</span>order <span class="token operator">=</span> idx <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="highlight-line">      pad<span class="token punctuation">.</span>style<span class="token punctuation">.</span>msFlexOrder <span class="token operator">=</span> idx <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="highlight-line">      container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>pad<span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Here we iterate over the heights reference which maps to layout columns. We determine whether we need to generate a padding element for a column. If necessary we create a set height element that fills the required space.</p><p>This padding ensures our elements are always in the column we expect them to be 😀👍</p><hr><p>All that’s left to do is generate our markup and then initialize the layout. Later, we will integrate that <code>resize</code> listener into the class.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line">window<span class="token punctuation">.</span>myMasonry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Masonry</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">MASONRY</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token comment">// NOTE:: For better performance, debounce this!</span></span>
<span class="highlight-line">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> myMasonry<span class="token punctuation">.</span>layout<span class="token punctuation">)</span></span></code></pre><hr><h2 class="post__heading post-heading" tabindex="-1" id="going-responsive"><span class="post-heading__content">Going responsive <a href="#going-responsive" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Going responsive isn’t that tricky once you’ve defined your responsive boundaries. The only decision left is how you wish to put in place the responsive element of your masonry layout.</p><p>First, we need to define the responsive boundaries. The viewport size limits and how many columns you want to see at each one.</p><p>For me, I’ve named the boundaries<code>sm</code>, <code>md</code>, <code>lg</code> and <code>xl</code>. The value for each will be it’s upper bound. For example, <code>sm</code> will be any viewport up until <code>430px</code> in width.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line">sm <span class="token operator">=</span> <span class="token number">430</span>px</span>
<span class="highlight-line">md <span class="token operator">=</span> <span class="token number">768</span>px</span>
<span class="highlight-line">lg <span class="token operator">=</span> <span class="token number">992</span>px</span>
<span class="highlight-line">xl <span class="token operator">=</span> <span class="token number">1500</span>px</span></code></pre><p>Next, define how many columns you wish to see for each boundary.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line">sm <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="highlight-line">md <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="highlight-line">lg <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="highlight-line">xl <span class="token operator">=</span> <span class="token number">4</span></span></code></pre><p>Now we need to implement it!</p><p>Let’s start with the simplest responsive property, the <code>width</code> of a panel at each boundary.</p><pre><code>panel width = 100% / number of columns for boundary
</code></pre><p>This will be best implemented within our CSS.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 430px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">.masonry-panel</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 768px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">.masonry-panel</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 992px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">.masonry-panel</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% / 3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 1500px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">.masonry-panel</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>If we make use of a <code>CSS</code> preprocessor such as <code>stylus</code> we can define a configuration. Using the configuration, we can iterate over it to generate our styles. We define the max number of items in our layout with the items key. This is so that we don’t create unnecessary style declarations for items that won’t render.</p><pre class="language-stylus codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">stylus</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-stylus"><span class="token variable-declaration"><span class="token variable">$config</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="highlight-line">  items<span class="token punctuation">:</span> <span class="token number">16</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  responses<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    breakpoints<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">      sm<span class="token punctuation">:</span> <span class="token number">430</span><span class="token unit">px</span></span>
<span class="highlight-line">      md<span class="token punctuation">:</span> <span class="token number">768</span><span class="token unit">px</span></span>
<span class="highlight-line">      lg<span class="token punctuation">:</span> <span class="token number">992</span><span class="token unit">px</span></span>
<span class="highlight-line">      xl<span class="token punctuation">:</span> <span class="token number">1500</span><span class="token unit">px</span></span>
    <span class="token punctuation">}</span></span><span class="token selector"><span class="token punctuation">,</span></span>
<span class="highlight-line">    cols<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">      sm<span class="token punctuation">:</span> 1,</span>
<span class="highlight-line">      md<span class="token punctuation">:</span> 2,</span>
<span class="highlight-line">      lg<span class="token punctuation">:</span> 3,</span>
<span class="highlight-line">      xl<span class="token punctuation">:</span> 4,</span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>The iteration to create the <code>width</code> for our panels at different breakpoints is then as simple as</p><pre class="language-stylus codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">stylus</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-stylus"><span class="highlight-line"><span class="token selector">.masonry-panel</span></span>
<span class="highlight-line">  <span class="token statement"><span class="token keyword">for</span> $breakpoint<span class="token punctuation">,</span> $value <span class="token operator">in</span> $config.responses.breakpoints</span></span>
<span class="highlight-line">    <span class="token func"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'$cols'</span><span class="token punctuation">,</span> $config.responses.cols<span class="token punctuation">[</span>$breakpoint<span class="token punctuation">]</span><span class="token punctuation">)</span></span></span>
<span class="highlight-line">    <span class="token atrule-declaration"><span class="token atrule">@media</span><span class="token punctuation">(</span>min-width $value<span class="token punctuation">)</span></span></span>
<span class="highlight-line">      <span class="token property-declaration"><span class="token property">width</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token unit">%</span> <span class="token operator">/</span> $cols <span class="token operator">*</span> <span class="token number">1</span><span class="token unit">%</span><span class="token punctuation">)</span></span></span></code></pre><p>The trickier of the responsive properties to implement is <code>order</code>. I’ve chosen to implement this using <code>stylus</code>. It could be done on the <code>JavaScript</code> side though. I’ll explain how in a moment.</p><p>First, this is how I’ve implemented responsive <code>order</code> for the panel elements using the <code>config</code> object with <code>stylus</code>.</p><pre class="language-stylus codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">stylus</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-stylus"><span class="highlight-line"><span class="token selector">.masonry-panel</span></span>
<span class="highlight-line">  <span class="token statement"><span class="token keyword">for</span> $breakpoint<span class="token punctuation">,</span> $value <span class="token operator">in</span> $config.responses.breakpoints</span></span>
<span class="highlight-line">    <span class="token func"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'$cols'</span><span class="token punctuation">,</span> $config.responses.cols<span class="token punctuation">[</span>$breakpoint<span class="token punctuation">]</span><span class="token punctuation">)</span></span></span>
<span class="highlight-line">    <span class="token atrule-declaration"><span class="token atrule">@media</span><span class="token punctuation">(</span>min-width $value<span class="token punctuation">)</span></span></span>
<span class="highlight-line">      <span class="token property-declaration"><span class="token property">width</span> <span class="token punctuation">(</span><span class="token number">100</span><span class="token unit">%</span> <span class="token operator">/</span> $cols <span class="token operator">*</span> <span class="token number">1</span><span class="token unit">%</span><span class="token punctuation">)</span></span></span>
<span class="highlight-line"></span>
<span class="highlight-line">      <span class="token statement"><span class="token keyword">for</span> $panel <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span>$config.items<span class="token punctuation">)</span></span></span>
<span class="highlight-line">        <span class="token selector">&amp;:nth-child(<span class="token interpolation variable"><span class="token delimiter punctuation">{</span>$panel<span class="token delimiter punctuation">}</span></span>)</span></span>
<span class="highlight-line">          <span class="token variable-declaration"><span class="token variable">$newOrder</span> <span class="token operator">=</span> $panel <span class="token operator">%</span> $cols</span></span>
<span class="highlight-line">          <span class="token statement"><span class="token keyword">if</span> $newOrder <span class="token operator">==</span> <span class="token number">0</span></span></span>
<span class="highlight-line">            <span class="token variable-declaration"><span class="token variable">$newOrder</span> <span class="token operator">=</span> $cols</span></span>
<span class="highlight-line">          <span class="token property-declaration"><span class="token property">order</span> $newOrder</span></span></code></pre><p>We hook into the iteration we used for generating the <code>width</code> property and tack on <code>nth-child</code> rules. For each child, we set the appropriate <code>order</code> for that child at that breakpoint. We calculate the <code>order</code> using <code>modulo</code>. As order can’t be <code>0</code>, if <code>$panel % $cols</code> is <code>0</code> then the order must be the amount of columns at that breakpoint 👍</p><p>How about a <code>JavaScript</code> solution? We could set the <code>order</code> of elements in a method that checks the current viewport size. We’d also need to declare the responsive config within our <code>JavaScript</code></p><p>We can start by creating a configuration <code>Object</code> that is passed into our <code>constructor</code>.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> masonryConfig <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  breakpoints<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    sm<span class="token operator">:</span> <span class="token number">430</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    md<span class="token operator">:</span> <span class="token number">768</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    lg<span class="token operator">:</span> <span class="token number">992</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    xl<span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  cols<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    sm<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    md<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    lg<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    xl<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Then our methods for ascertaining breakpoint and desired columns along with setting panel styles could look like</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">getViewportCols</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> config <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token keyword">let</span> breakpoint <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="highlight-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> b <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>breakpoints<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth <span class="token operator">&gt;</span> config<span class="token punctuation">.</span>breakpoints<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span> breakpoint <span class="token operator">=</span> b</span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token keyword">return</span> config<span class="token punctuation">.</span>cols<span class="token punctuation">[</span>breakpoint<span class="token punctuation">]</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"></span>
<span class="highlight-line"><span class="token function">setPanelStyles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> getViewportCols<span class="token punctuation">,</span> panels <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> cols <span class="token operator">=</span> <span class="token function">getViewportCols</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> p <span class="token operator">&lt;</span> panels<span class="token punctuation">.</span>length<span class="token punctuation">;</span> p<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    panels<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>order <span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> cols <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> cols <span class="token operator">:</span> <span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> cols</span>
<span class="highlight-line">    panels<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">100</span> <span class="token operator">/</span> cols<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>We’d just need to add the <code>setPanelStyles</code> method as one of the lifecycle methods of <code>layout</code>. This would get invoked on iniialization and every consequent re-layout that happens as a result of viewport size change 🎉</p><h2 class="post__heading post-heading" tabindex="-1" id="dynamic-content"><span class="post-heading__content">Dynamic Content <a href="#dynamic-content" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>There can sometimes be issues when we want to start loading images into our masonry layout. The issue being that we run our layout code but then all our images load and break the layout.</p><p>Fear not, there is a way to combat this.</p><p>There is a fantastic package called <code>imagesLoaded</code> that we can leverage. Using <code>imagesLoaded</code> we can hook into when our images load and re-run the layout method.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> myMasonry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Masonry</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> masonryConfig<span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token keyword">const</span> load <span class="token operator">=</span> <span class="token function">imagesLoaded</span><span class="token punctuation">(</span>myMasonry<span class="token punctuation">.</span>container<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> myMasonry<span class="token punctuation">.</span><span class="token function">layout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="highlight-line">load<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> image</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token comment">// This trick allows us to avoid any floating pixel sizes</span></span>
<span class="highlight-line">  image<span class="token punctuation">.</span>img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> image<span class="token punctuation">.</span>img<span class="token punctuation">.</span>height</span>
<span class="highlight-line">  image<span class="token punctuation">.</span>img<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> image<span class="token punctuation">.</span>img<span class="token punctuation">.</span>height<span class="token punctuation">)</span></span>
<span class="highlight-line">  image<span class="token punctuation">.</span>img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'loading'</span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token comment">// NOTE:: Not the cleanest thing to do here</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> parentPanel <span class="token operator">=</span> image<span class="token punctuation">.</span>img<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span>parentNode</span>
<span class="highlight-line">  parentPanel<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">height: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>image<span class="token punctuation">.</span>img<span class="token punctuation">.</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="highlight-line">  parentPanel<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">PANEL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--loading</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="highlight-line">  myMasonry<span class="token punctuation">.</span><span class="token function">layout</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre><p>What we are doing here is saying, when all images have loaded run the layout code. But to go one step further, we run it after every image has loaded.</p><p>You may question why are we setting the <code>height</code> of the image? This is actually to avoid <code>float</code> heights like <code>400.678px</code>. These can cause bugs in the layout.</p><p>You can check out a demo for a responsive masonry image gallery at the bottom of this article 👍</p><hr><p>And that’s it! How to create the “true” masonry layout effect with ordering from left to right by leveraging <code>flexbox</code> properties and adding a hint of <code>JavaScript</code> to help out 🎉</p><p>I’ve included some demos also for reference. These include loading dynamic content and a <code>react</code> version using <code>styled-components</code>.</p><p class="codepen" data-theme-id="dark" data-default-tab="result" data-user="jh3y" data-slug-hash="vgZWZL" data-preview="true" data-editable="true"><span>Check out <a href="https://codepen.io/jh3y/pen/vgZWZL" target="_blank" rel="noopener noreferrer">this pen</a> by Jhey (<a href="https://codepen.io/jh3y" target="_blank" rel="noopener noreferrer">@jh3y</a>) on <a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen</a>.</span></p><script async="" src="../../../cpwebassets.codepen.io/assets/embed/ei.js"></script><p class="codepen" data-theme-id="dark" data-default-tab="result" data-user="jh3y" data-slug-hash="pLyVwo" data-preview="true" data-editable="true"><span>Check out <a href="https://codepen.io/jh3y/pen/pLyVwo" target="_blank" rel="noopener noreferrer">this pen</a> by Jhey (<a href="https://codepen.io/jh3y" target="_blank" rel="noopener noreferrer">@jh3y</a>) on <a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen</a>.</span></p><script async="" src="../../../cpwebassets.codepen.io/assets/embed/ei.js"></script><p class="codepen" data-theme-id="dark" data-default-tab="result" data-user="jh3y" data-slug-hash="jzqaxe" data-preview="true" data-editable="true"><span>Check out <a href="https://codepen.io/jh3y/pen/jzqaxe" target="_blank" rel="noopener noreferrer">this pen</a> by Jhey (<a href="https://codepen.io/jh3y" target="_blank" rel="noopener noreferrer">@jh3y</a>) on <a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen</a>.</span></p><script async="" src="../../../cpwebassets.codepen.io/assets/embed/ei.js"></script></div></article><div class="post-footer"><div class="post-footer__content"><p>Thanks for reading! Got a question or a suggestion?</p><h3 id="ping-me-🐦"><a href="../../contact/index.html">Ping me</a>! 🐦</h3><p>Use RSS? Hook up to <a href="../../posts.xml">the feed</a> so you don't miss any posts.</p></div><div class="post-footer__content"><h4>If you enjoyed that, you might like this:</h4><div class="interest__title"><a href="../advanced-gulp/index.html">Advanced Gulp</a></div></div><div class="post-footer__content"><h3 class="section-title">A Dose of Awesome?</h3><p></p><p>I love to learn and have fun while doing it. What makes that even more awesome, is sharing it with you! Sign up for my newsletter where I'll share things I've made, learned, and experienced.</p><p></p><div id="revue-embed"><form id="revue-form" action="https://www.getrevue.co/profile/jh3y/add_subscriber" method="post" name="revue-form" target="_blank"><audio src="../../assets/audio/streamer.mp3" preload="auto"></audio><div class="revue-form-group"><label class="hide" for="member_email">Email address *</label><input class="revue-form-field" id="member_email" placeholder="Your email address..." type="email" required="true" name="member[email]"></div><div class="revue-form-footer"><span>By subscribing, you agree with Revue's </span><a target="_blank" href="https://www.getrevue.co/terms" rel="noopener noreferrer">Terms</a><span> and </span><a target="_blank" href="https://www.getrevue.co/privacy" rel="noopener noreferrer">Privacy Policy</a>.</div><div class="revue-form-actions"><input id="member_submit" type="submit" value="Subscribe" name="member[subscribe]" data-sound="CLICK" data-sound-trigger="mousedown"></div></form></div></div></div></main><footer class="footer"><div class="footer__socials"><a class="social-link" href="../../posts.xml" rel="noopener noreferrer" target="_blank" title="Grab my RSS Feed!"><svg viewBox="0 0 24 24" role="img"><title>Rss icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"></path></svg></a><a class="social-link" href="https://twitter.com/intent/follow?screen_name=jh3yy" rel="noopener noreferrer" target="_blank" title="Come follow me on Twitter!"><svg viewBox="0 0 24 24" role="img"><title>Twitter icon</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a class="social-link" href="https://codepen.io/jh3y" rel="noopener noreferrer" target="_blank" title="Check out my CodePen"><svg viewBox="18 20 82 78" role="img"><title>Codepen icon</title><path d="M97.071,48.281c-0.007-0.047-0.019-0.092-0.026-0.139c-0.016-0.09-0.032-0.18-0.056-0.267 c-0.014-0.053-0.033-0.104-0.05-0.154c-0.025-0.078-0.051-0.156-0.082-0.232c-0.021-0.053-0.047-0.105-0.071-0.156 c-0.033-0.072-0.068-0.142-0.108-0.21c-0.029-0.051-0.061-0.1-0.091-0.148c-0.043-0.066-0.087-0.131-0.135-0.193 c-0.035-0.047-0.072-0.093-0.109-0.138c-0.051-0.059-0.104-0.117-0.159-0.172c-0.042-0.043-0.083-0.086-0.127-0.125 c-0.059-0.053-0.119-0.104-0.18-0.152c-0.048-0.037-0.095-0.074-0.145-0.109c-0.019-0.012-0.035-0.027-0.053-0.039L61.769,23.438 c-1.071-0.714-2.466-0.714-3.537,0L24.321,46.045c-0.018,0.012-0.034,0.027-0.053,0.039c-0.05,0.035-0.097,0.072-0.144,0.109 c-0.062,0.049-0.123,0.1-0.181,0.152c-0.045,0.039-0.086,0.082-0.128,0.125c-0.055,0.055-0.108,0.113-0.158,0.172 c-0.038,0.045-0.075,0.091-0.11,0.138c-0.047,0.062-0.092,0.127-0.134,0.193c-0.032,0.049-0.062,0.098-0.092,0.148 c-0.039,0.068-0.074,0.139-0.108,0.21c-0.024,0.051-0.049,0.104-0.071,0.156c-0.031,0.076-0.057,0.154-0.082,0.232 c-0.017,0.051-0.035,0.102-0.05,0.154c-0.023,0.087-0.039,0.177-0.056,0.267c-0.008,0.047-0.02,0.092-0.025,0.139 c-0.019,0.137-0.029,0.275-0.029,0.416v22.607c0,0.141,0.011,0.279,0.029,0.418c0.006,0.045,0.018,0.092,0.025,0.137 c0.017,0.09,0.032,0.18,0.056,0.268c0.015,0.053,0.033,0.104,0.05,0.154c0.025,0.078,0.051,0.155,0.082,0.233 c0.021,0.053,0.047,0.104,0.071,0.154c0.034,0.072,0.069,0.143,0.108,0.213c0.029,0.049,0.06,0.098,0.092,0.146 c0.042,0.066,0.087,0.131,0.134,0.193c0.035,0.049,0.072,0.094,0.11,0.139c0.05,0.059,0.103,0.117,0.158,0.172 c0.042,0.043,0.083,0.086,0.128,0.124c0.058,0.053,0.118,0.104,0.181,0.152c0.047,0.037,0.094,0.074,0.144,0.109 c0.019,0.012,0.035,0.027,0.053,0.039l33.911,22.607c0.536,0.357,1.152,0.537,1.769,0.537c0.616,0,1.233-0.18,1.768-0.537 L95.68,73.956c0.018-0.012,0.034-0.027,0.053-0.039c0.05-0.035,0.097-0.072,0.145-0.109c0.061-0.049,0.121-0.1,0.18-0.152 c0.044-0.038,0.085-0.081,0.127-0.124c0.056-0.055,0.108-0.113,0.159-0.172c0.037-0.045,0.074-0.09,0.109-0.139 c0.048-0.062,0.092-0.127,0.135-0.193c0.03-0.049,0.062-0.098,0.091-0.146c0.04-0.07,0.075-0.141,0.108-0.213 c0.024-0.051,0.05-0.102,0.071-0.154c0.031-0.078,0.057-0.155,0.082-0.233c0.017-0.051,0.036-0.102,0.05-0.154 c0.023-0.088,0.04-0.178,0.056-0.268c0.008-0.045,0.02-0.092,0.026-0.137c0.018-0.139,0.028-0.277,0.028-0.418V48.697 C97.1,48.557,97.089,48.418,97.071,48.281z M63.188,32.048L88.17,48.701l-11.158,7.465l-13.823-9.247V32.048z M56.812,32.048 v14.871l-13.822,9.247l-11.159-7.465L56.812,32.048z M29.278,54.665L37.255,60l-7.977,5.335V54.665z M56.812,87.953L31.831,71.3 l11.159-7.463l13.822,9.245V87.953z M60,67.543L48.723,60L60,52.458L71.276,60L60,67.543z M63.188,87.953V73.082l13.823-9.245 L88.17,71.3L63.188,87.953z M90.723,65.336L82.746,60l7.977-5.335V65.336z"></path></svg></a><a class="social-link" href="https://twitch.tv/jh3yy" rel="noopener noreferrer" target="_blank" title="Check out my latest live stream"><svg viewBox="0 0 24 24" role="img"><title>Twitch icon</title><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"></path></svg></a><a class="social-link" href="https://github.com/jh3y" rel="noopener noreferrer" target="_blank" title="See what I'm making on Github"><svg viewBox="0 0 24 24" role="img"><title>Github icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="footer__info"><span>|</span><span>jh3y © 2021</span></div></footer></div><script src="../../index.critical.js"></script><link rel="stylesheet" href="../../post.css"><script src="../../post.js"></script><script>window.netlifyIdentity&&window.netlifyIdentity.on("init",n=>{n||window.netlifyIdentity.on("login",()=>{document.location.href="/admin/"})})</script></body>
<!-- Mirrored from jhey.dev/writing/how-to-true-masonry-layout/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 Nov 2021 22:51:23 GMT -->
</html>