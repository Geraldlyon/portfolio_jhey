<!doctype html><html lang="en">
<!-- Mirrored from jhey.dev/writing/how-to-looping-block-reveal-effect/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 Nov 2021 22:50:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><title>How To: Looping Block Reveal Effect - I'm Jhey Tompkins!</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#141a1c"><meta name="description" content="I'm a developer that makes awesome things for awesome people!"><meta property="og:site_name" content="I'm Jhey Tompkins"><meta property="og:title" content="How To: Looping Block Reveal Effect - I'm Jhey Tompkins"><meta name="image" content="../../assets/images/og/how-to-looping-block-reveal-effect.png"><meta name="og:image" content="../../assets/images/og/how-to-looping-block-reveal-effect.png"><meta property="og:type" content="website"><meta property="og:url" content="index.html"><meta name="twitter:title" content="How To: Looping Block Reveal Effect - I'm Jhey Tompkins"><meta name="twitter:description" content="I'm a developer that makes awesome things for awesome people!"><meta name="twitter:image" content="../../assets/images/og/how-to-looping-block-reveal-effect.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@jh3yy"><link rel="icon" href="../../assets/icons/favicon-32x32.png" type="image/png" sizes="16x16"><link rel="shortcut icon" href="../../assets/icons/favicon-32x32.png"><link rel="apple-touch-icon" href="../../assets/icons/icon-192x192.png"><link rel="manifest" href="../../manifest.webmanifest"><script async="" src="../../../identity.netlify.com/v1/netlify-identity-widget.js"></script><noscript><style>.nav__button,.nav__settings,.search,.swapper__slider{display:none}</style></noscript><script>"use strict";window.LIGHT_QUERY=window.matchMedia("(prefers-color-scheme: light)"),window.THEMES={LIGHT:"LIGHT",DARK:"DARK",KEY:"THEME"},window.__setTheme=E=>{window.__THEME=E,document.documentElement.style.setProperty("--on",E===THEMES.DARK?0:1),window.localStorage.setItem(THEMES.KEY,E)};const stored=localStorage.getItem(THEMES.KEY);stored?(window.__THEME=stored,window.__setTheme(stored)):(window.LIGHT_QUERY.matches?window.__THEME=THEMES.LIGHT:window.__THEME=THEMES.DARK,window.__setTheme(window.__THEME)),window.INITIAL_THEME=window.__THEME&&window.__THEME===THEMES.LIGHT||window.localStorage.getItem(THEMES.KEY)&&window.localStorage.getItem(THEMES.KEY)===THEMES.LIGHT</script><style>*{-webkit-box-sizing:border-box;box-sizing:border-box}:root{--on:0;--nav-open:0;--sz-0:0.25rem;--sz-1:0.5rem;--sz-2:0.75rem;--sz-3:0.875rem;--sz-4:1rem;--sz-5:1.25rem;--sz-6:1.5rem;--sz-7:2rem;--sz-8:3rem;--sz-9:4rem;--sz-10:6rem;--sz-11:8rem;--sz-13:16rem;--sz-17:48rem;--tn-zp:0.1s;--tn-qu:0.2s;--max-width:var(--sz-17);--heading-size:2;--heading-line-height:0.9;--min-control-size:48px;--nav-height:80px;--nav-width:var(--sz-13);--bg:hsl(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc((10 + var(--on)*80)*1%));--bg-2:hsl(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc(var(--on)*100*1%));--bg-3:hsl(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc((3 + var(--on)*94)*1%));--color:hsl(0,0%,calc((96 - var(--on)*80)*1%));--color-2:hsl(0,0%,calc((70 - var(--on)*35)*1%));--border:hsla(0,0%,calc((100 - var(--on)*90)*1%),0.5);--accent:#dd3c3c;--accent-2:rgba(221,60,60,0.5)}@media (min-width:375px){:root{--heading-size:2.5}}@media (min-width:440px){:root{--heading-size:3}}@media (min-width:768px){:root{--heading-line-height:0.8;--heading-size:6}}@media (prefers-color-scheme:dark){:root{--on:0}}@media (prefers-color-scheme:light){:root{--on:1}}code:not([class]){color:var(--accent);background:var(--bg-3);padding:var(--sz-0)}code:not([class])::selection{color:var(--color)}code:not([class])::-moz-selection{color:var(--color)}html:focus-within{scroll-behavior:smooth}@media (prefers-reduced-motion){html:focus-within{scroll-behavior:auto}}body,html{background:var(--bg);color:var(--color);font-family:Inter,Nunito Sans,-apple-system,\.SFNSText-Regular,San Francisco,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:1.5;min-height:100vh;overflow-x:hidden;text-rendering:optimizeSpeed}body{font-size:var(--sz-4)}@media (min-width:768px){body{font-size:var(--sz-5)}}.layout{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100vh;padding:0 var(--sz-4)}.layout--nav{-webkit-transform:translate(calc(var(--nav-open)*var(--nav-width)));transform:translate(calc(var(--nav-open)*var(--nav-width)));-webkit-transition:-webkit-transform var(--tn-qu);transition:-webkit-transform var(--tn-qu);transition:transform var(--tn-qu);transition:transform var(--tn-qu),-webkit-transform var(--tn-qu)}@media (min-width:768px){.layout--nav{-webkit-transform:translate(0);transform:translate(0)}}.layout__hero{width:100%;padding-bottom:56.25%;position:relative;background:var(--bg-3);overflow:hidden}.layout__hero picture{position:absolute;width:100%;height:100%}footer,main{margin:0 auto;max-width:100%;width:100%}@media (min-width:768px){footer,main{max-width:var(--max-width)}}fieldset{padding:0;border:0}blockquote,body,figure,h1,h2,h3,h4,p{margin:0}p{margin-bottom:var(--sz-5)}main{-webkit-box-flex:1;-ms-flex:1;flex:1}.layout--nav main{padding-top:var(--nav-height)}h1,h2,h3,h4{line-height:1.1;outline:transparent}a{text-decoration:none}a:not([class]){text-decoration:underline;-webkit-text-decoration-color:var(--accent);text-decoration-color:var(--accent);-webkit-transition:background var(--tn-zp) linear;transition:background var(--tn-zp) linear;background:-webkit-gradient(linear,left top,left bottom,from(var(--color)),to(var(--color))) 50% 100%/100% 0 no-repeat;background:linear-gradient(var(--color),var(--color)) 50% 100%/100% 0 no-repeat}a:not([class]),a:not([class]):visited{color:var(--color)}a:not([class]):hover{background-size:100% 100%;color:var(--bg);-webkit-text-decoration-color:var(--bg);text-decoration-color:var(--bg)}::selection{background:var(--selection,var(--accent-2))}::-moz-selection{background:var(--selection,var(--accent-2))}textarea{height:140px}input[type=email],input[type=text],textarea{padding:var(--sz-4) var(--sz-4);border:2px solid var(--border);background:var(--bg-2);outline:transparent;color:var(--color)}input[type=email]:focus,input[type=text]:focus,textarea:focus{--border:var(--accent)}button,input{font-size:100%}article>*+*{margin-top:var(--sz-7)}article>h1:first-of-type{font-size:calc(var(--heading-size)*1rem);line-height:var(--heading-line-height);text-transform:uppercase;margin:var(--sz-7) 0}@media (min-width:768px){article>h1:first-of-type{margin:var(--sz-10) 0}}.md-b{position:relative;width:100%;background:var(--bg-3);padding-bottom:56.25%}.md-b_m{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;width:100%}[type=submit],button{--lightness:0;--hue:calc(200 - var(--on)*160);--saturation:calc((20 + var(--on)*50)*1%);--bg:hsl(var(--hue),var(--saturation),calc((var(--lightness, 0) + var(--on)*75)*1%));--border:hsla(0,0%,calc((100 - var(--on)*90)*1%),0.5);-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--bg);border:2px solid var(--border);color:var(--color);font-weight:700;outline-color:var(--accent)}[type=submit]:hover,button:hover{--lightness:20}[type=submit]:active,button:active{--lightness:10}.rss{display:inline-block;height:var(--sz-5);width:var(--sz-5);opacity:.5;position:absolute;bottom:calc(var(--heading-size)*1.1*.2rem);left:calc(100% + var(--sz-0))}.rss__hold{position:relative}.rss:hover{opacity:1}.rss svg{height:100%;width:100%;position:absolute}hr{margin:var(--sz-6) auto;opacity:.6;width:50%;clear:both}h2{font-size:var(--sz-7);margin:var(--sz-5) 0}@media (min-width:768px){h2{font-size:var(--sz-8)}}figure{margin:var(--sz-5) auto}figcaption{margin-top:var(--sz-1);text-align:center;font-size:var(--sz-3)}.hide{height:1px;width:1px;position:absolute;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}picture{display:block}picture img{height:100%;max-height:100%;max-width:100%;-o-object-fit:cover;object-fit:cover}@font-face{font-family:JetBrains Mono;src:url(../../JetBrainsMono-Regular.2c7b4557.woff2) format("woff2"),url(../../JetBrainsMono-Regular.4b8e6034.woff) format("woff"),url(../../JetBrainsMono-Variable.3cc1f995.ttf) format("ttf");font-display:swap}@font-face{font-family:Inter;src:url(../../Inter-VariableFont_slnt%2cwght.374f8963.ttf) format("ttf");font-display:swap}.shades{--x:0}.shades__frame{fill:#000}.shades__lens{fill:#202222}.shades__detail{fill:#e6e6e6}.shades__glare-container{-webkit-transform:translate(calc(var(--x,0)*1px));transform:translate(calc(var(--x,0)*1px));fill:#fff}.shades__code{-webkit-animation:code 2s linear infinite;animation:code 2s linear infinite}.code-bear .shades__lens{fill:#011627;opacity:.75}.code-bear .shades__glare-container{opacity:.25}.code-bear,.contact-bear{height:100%;width:100%;max-height:100%;max-width:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%) scale(.75);transform:translate(-50%,-50%) scale(.75)}.contact-bear .shades__glare-container{-webkit-animation:glare 3s linear infinite;animation:glare 3s linear infinite}.bear{overflow:visible!important}.bear--party-hover .party-lines{display:none}.bear--party-hover:hover .party-lines{-webkit-animation:party 1s linear infinite;animation:party 1s linear infinite;display:block}.bear__shades{opacity:var(--bear-shades,1)}.bear__tears{-webkit-transition:fill var(--tn-qu);transition:fill var(--tn-qu);fill:hsla(220,100%,65%,var(--bear-tears,0))}.bear__brows{-webkit-transition:stroke var(--tn-qu);transition:stroke var(--tn-qu);stroke:hsla(0,0%,0%,var(--bear-brows,1))}.bear__eye{-webkit-transition:-webkit-transform var(--tn-qu);transition:-webkit-transform var(--tn-qu);transition:transform var(--tn-qu);transition:transform var(--tn-qu),-webkit-transform var(--tn-qu);-webkit-transform:scaleY(var(--bear-eyes-open,.35));transform:scaleY(var(--bear-eyes-open,.35));-webkit-transform-origin:50% 52%;transform-origin:50% 52%;fill:hsla(0,0%,0%,var(--bear-eyes,1))}.bear__ear,.bear__head{fill:hsla(24,calc(var(--bear-saturation,100)*1%),25%,1)}.bear__ear-inner,.bear__muzzle{fill:hsla(24,calc(var(--bear-saturation,57)*1%),80%,1)}.bear__nose{fill:#0d0d0d}.bear__cap{fill:#0a0a0a}.bear__cap-strap{fill:hsla(10,calc(var(--bear-saturation,100)*1%),40%,1)}.bear__cap-strap--main{fill:hsla(10,calc(var(--bear-saturation,100)*1%),50%,1)}.bear__eye--teary{fill:hsla(200,100%,75%,calc(var(--bear-tears,0) - .5))}@-webkit-keyframes glare{0%{-webkit-transform:translate(-140px);transform:translate(-140px)}to{-webkit-transform:translate(280px);transform:translate(280px)}}@keyframes glare{0%{-webkit-transform:translate(-140px);transform:translate(-140px)}to{-webkit-transform:translate(280px);transform:translate(280px)}}@-webkit-keyframes party{to{-webkit-transform:translateY(-352.8px);transform:translateY(-352.8px)}}@keyframes party{to{-webkit-transform:translateY(-352.8px);transform:translateY(-352.8px)}}@-webkit-keyframes code{to{-webkit-transform:translateY(-240px);transform:translateY(-240px)}}@keyframes code{to{-webkit-transform:translateY(-240px);transform:translateY(-240px)}}.footer{color:var(--color);font-weight:700;padding:var(--sz-7) 0;font-size:var(--sz-3);text-align:center;width:100%;margin-bottom:var(--sz-4)}.footer span:first-of-type{display:none}@media (min-width:768px){.footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.footer span:first-child{display:inline-block;margin:0 var(--sz-4)}}.footer a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:50%;height:48px;width:48px}.footer a:hover{background:var(--color)}.footer a:hover path{fill:var(--accent)}.footer a svg{fill:var(--color);height:50%;width:50%}.footer__socials{display:-webkit-box;display:-ms-flexbox;display:flex;margin-bottom:var(--sz-1);-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media (min-width:768px){.footer__socials{margin:0}}.nav-control{height:var(--min-control-size);width:var(--min-control-size);position:absolute;font-size:0;color:transparent;background:0 0;border:0}.nav-control path,.nav-control span{display:none}.nav-control svg{height:60%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.nav{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:hsla(calc(200 - var(--on)*160),calc((20 + var(--on)*50)*1%),calc((10 + var(--on)*80)*1%),.9);display:-webkit-box;display:-ms-flexbox;display:flex;height:var(--nav-height);-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;left:0;margin:0 auto;position:fixed;right:0;top:0;-webkit-transform:translate(calc(var(--nav-open,0)*var(--nav-width)));transform:translate(calc(var(--nav-open,0)*var(--nav-width)));-webkit-transition:-webkit-transform var(--tn-qu);transition:-webkit-transform var(--tn-qu);transition:transform var(--tn-qu);transition:transform var(--tn-qu),-webkit-transform var(--tn-qu);z-index:2}@media (min-width:768px){.nav{-webkit-transform:translate(0);transform:translate(0)}}@media (min-width:1000px){.nav{padding:0}}.nav__content{background:var(--bg);bottom:0;-webkit-box-shadow:-5px 0 10px var(--bg-3) inset;box-shadow:-5px 0 10px var(--bg-3) inset;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100vh;padding:var(--sz-4);position:fixed;right:100%;top:0;width:var(--nav-width)}@media (min-width:768px){.nav__content{background:0 0;-webkit-box-shadow:none;box-shadow:none;height:100%;position:static;width:100%}}.nav__nav{max-width:var(--max-width);width:100%;margin:0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-ms-flex:1;flex:1}.nav__bear{height:var(--min-control-size);width:var(--min-control-size)}.nav__button{left:calc(100% + var(--sz-4));top:var(--sz-4)}.nav__cloak{position:fixed;top:0;right:0;bottom:0;left:0;z-index:10;display:none}.nav__toggle:checked~.layout--nav,.nav__toggle:checked~.nav,.nav__toggle:checked~.nav__cloak{-webkit-transform:translate(var(--nav-width));transform:translate(var(--nav-width))}.nav__toggle:checked~.nav .nav__toggle-control span:nth-of-type(2),.nav__toggle:checked~.nav__cloak{display:block}.nav__toggle:checked~.nav .nav__toggle-control span:first-of-type{display:none}@media (min-width:768px){.nav__toggle{display:none}}.nav__toggle-control{top:var(--sz-4);left:calc(100% + var(--sz-4))}.nav__toggle-control path:first-of-type,.nav__toggle-control span:first-of-type{display:block}.nav__toggle-control path:nth-of-type(2),.nav__toggle-control span:nth-of-type(2){display:none}@media (min-width:768px){.nav__toggle-control{display:none}}.nav__items{-webkit-box-flex:1;-ms-flex:1;list-style-type:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%}.nav__items>li{height:var(--min-control-size);line-height:var(--min-control-size)}.nav__items>li+li{margin-top:var(--sz-4)}@media (min-width:768px){.nav__items{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.nav__items>li{height:auto}.nav__items>li:first-child{display:none}.nav__items>li+li{margin-top:0}.nav__items>li+li:not(:nth-of-type(2)){margin-left:var(--sz-6)}}.nav__link{font-size:var(--sz-5);font-weight:700;text-decoration:none;color:var(--color-2)}.nav__link:hover{text-decoration:underline;color:var(--accent)}.nav__settings{--a:0;--rotate:calc(-180 + var(--a, 0)*180);--rotate:0;-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;position:relative}.nav__settings:before{content:"";height:500%;width:500%;-webkit-transform:translate(-50%,-50%) scale(var(--a));transform:translate(-50%,-50%) scale(var(--a));top:50%;left:50%;position:absolute;border-radius:50%;background:var(--bg-2);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;display:none}@media (min-width:768px){.nav__settings:before{display:block}}@media (min-width:768px){.nav__settings{height:var(--min-control-size);position:fixed;right:var(--sz-4);top:calc(var(--nav-height)/2);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;-webkit-transform:translateY(-50%) rotate(calc(var(--rotate)*1deg));transform:translateY(-50%) rotate(calc(var(--rotate)*1deg));width:var(--min-control-size)}}.nav__home{background:0 0;display:none;height:var(--min-control-size);width:var(--min-control-size);margin-right:var(--sz-4);position:relative;text-decoration:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.nav__home img{height:40px;width:40px;-o-object-fit:cover;object-fit:cover}@media (min-width:768px){.nav__home{display:-webkit-box;display:-ms-flexbox;display:flex}}@media (min-width:1000px){.nav__home{left:var(--sz-4);margin-right:0;position:fixed;top:calc(var(--nav-height)/2);-webkit-transform:translateY(-50%);transform:translateY(-50%)}}.settings-control,.settings-toggle{position:relative;margin-right:var(--sz-2)}@media (min-width:768px){.settings-control,.settings-toggle{margin-right:0;position:absolute}}.audio-toggle{--r:10}.theme-toggle{--r:80}.settings-toggle{display:none}@media (min-width:768px){.settings-toggle{display:block}}.settings-controls{display:-webkit-box;display:-ms-flexbox;display:flex}@media (min-width:768px){.settings-control{--t:calc(var(--a, 0)*150);--s:var(--a,0);top:50%;left:50%;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;-webkit-transform:translate(-50%,-50%) rotate(calc(var(--r)*1deg)) translateY(calc(var(--t)*1%)) rotate(calc((var(--r) + var(--rotate))*-1deg)) scale(var(--s));transform:translate(-50%,-50%) rotate(calc(var(--r)*1deg)) translateY(calc(var(--t)*1%)) rotate(calc((var(--r) + var(--rotate))*-1deg)) scale(var(--s))}}[aria-pressed=false] path:first-of-type,[aria-pressed=false] span:first-of-type,[aria-pressed=true] path:nth-of-type(2),[aria-pressed=true] span:nth-of-type(2){display:block}.fl{float:left;margin:var(--sz-7) var(--sz-5) var(--sz-5) 0}.fr{float:right;margin:var(--sz-7) 0 var(--sz-5) var(--sz-5)}.page-intro{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex}@media (min-width:440px){.page-intro{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}}@media (min-width:440px){.page-intro__intro{padding-right:var(--sz-2)}}.page-intro__img{position:relative;-webkit-box-flex:1;-ms-flex:1 0 40%;flex:1 0 40%;min-height:160px}.page-intro img{position:absolute;top:0;left:0;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}</style><style>code[class*=language-],pre[class*=language-]{color:#d6deeb;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:rgba(29,59,83,.99)}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:rgba(29,59,83,.99)}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{color:#fff;background:#011627}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#637777;font-style:italic}.token.punctuation{color:#c792ea}.namespace{color:#b2ccd6}.token.deleted{color:rgba(239,83,80,.56);font-style:italic}.token.property,.token.symbol{color:#80cbc4}.token.keyword,.token.operator,.token.tag{color:#7fdbca}.token.boolean{color:#ff5874}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.doctype,.token.selector{color:#c792ea;font-style:italic}.token.attr-name,.token.inserted{color:#addb67;font-style:italic}.language-css .token.string,.style .token.string,.token.entity,.token.string,.token.url{color:#addb67}.token.atrule,.token.attr-value,.token.class-name{color:#ffcb8b}.token.important,.token.regex,.token.variable{color:#d6deeb}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.post__aside{background:var(--bg-3);padding:var(--sz-6);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.post__aside svg{-webkit-box-flex:1;-ms-flex:1 0 var(--sz-8);flex:1 0 var(--sz-8);margin-right:var(--sz-2)}.post__aside svg path{fill:var(--accent)}.post__aside p{margin:0}.post__hero-credit{font-size:var(--sz-4);display:block;color:var(--color-2)}.post__content blockquote{border-left:solid var(--sz-0) var(--accent);padding:var(--sz-4);color:var(--color-2);background:var(--bg-2)}.post__content blockquote p{margin:0}.post__content img,.post__content video{max-width:100%;max-height:50vh;position:relative;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.post__content video{width:100%}table{margin:0 auto;border-collapse:collapse;font-size:var(--sz-4)}tbody,thead{--bg:hsl(0,0%,calc((var(--lightness, 70) + var(--on, 0)*20)*1%));--bd:hsl(0,0%,calc((40 + var(--on, 0)*20)*1%));background:var(--bg)}thead{--lightness:50}tbody{--lightness:70}td,th{border:2px solid var(--bd);padding:var(--sz-1)}.codeblock>code{width:100%;overflow:auto;display:inline-block;padding:var(--sz-2)}.codeblock__button{width:80px;border:0;background:hsl(207,95%,var(--lightness,8%))}.codeblock__button:hover{--lightness:20%}.codeblock__button:active{--lightness:10%}.codeblock__bar{--color:#d6deeb;color:var(--color);display:-webkit-box;display:-ms-flexbox;display:flex;height:var(--min-control-size);-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;border-bottom:1px solid #80a8ff;margin-bottom:var(--sz-2)}.codeblock__button,.codeblock__label{font-weight:700;text-transform:uppercase;font-size:var(--sz-3);font-family:JetBrains Mono,monospace}.codeblock__button{height:100%}.codeblock__label{line-height:var(--min-control-size);margin-right:var(--sz-2)}.codepen{background:var(--bg-2);border:0}.codepen span{padding:var(--sz-5);display:block}.twitter-tweet{margin:var(--sz-7) auto!important}.twitter-tweet iframe{max-width:100%}.post__details{font-size:var(--sz-4);margin-bottom:var(--sz-7);color:var(--color-2)}.post__details-icon{margin-right:var(--sz-2);height:var(--sz-6);width:var(--sz-6)}.post__details a,.post__details a:visited{color:var(--color-2)}.post__details a:hover{color:var(--bg)}.cp_embed_wrapper,.post__embed-container{width:100%;padding-bottom:56.25%;position:relative;min-height:160px}.cp_embed_wrapper{min-height:220px}.cp_embed_wrapper,.post__embed-container{margin:var(--sz-8) auto}.post__detail{display:-webkit-box;display:-ms-flexbox;display:flex}.post__detail-icon{height:var(--sz-6);width:var(--sz-6)}.cp_embed_iframe,.post__embed{position:absolute;top:0;right:0;bottom:0;left:0;height:100%;width:100%}.post-heading{scroll-margin-top:var(--nav-height);position:relative;outline:transparent;font-size:var(--f,var(--sz-7))}.post-heading__content{position:relative;display:inline-block;padding-right:var(--sz-7)}.post-heading__permalink{height:var(--sz-7);width:var(--sz-7);opacity:.5;position:absolute;top:50%;right:0;-webkit-transform:translate(var(--sz-1),-50%);transform:translate(var(--sz-1),-50%);display:inline-block}.post-heading__permalink:hover{opacity:1}.post-heading__permalink svg{height:var(--sz-7);width:var(--sz-7);fill:var(--color);position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.post>h1:first-of-type,.post__content h2,.post__content h3,.post__content h4{--f:var(--fs,var(--sz-7));line-height:.95;font-size:var(--f);margin:var(--m,var(--sz-5)) auto var(--sz-4) auto}@media (min-width:768px){.post>h1:first-of-type,.post__content h2,.post__content h3,.post__content h4{--f:var(--fb,var(--sz-7))}}.post__content>*+*{margin-top:var(--sz-6)}.post>h1:first-of-type{--fs:var(--sz-6);--fb:var(--sz-8)}.post__content h2{--fs:var(--sz-6);--fb:var(--sz-7);--m:var(--sz-10)}.post__content h3{--fs:var(--sz-5);--fb:var(--sz-6);--m:var(--sz-8)}.post__content h4{--fs:var(--sz-4);--fb:var(--sz-5);--m:var(--sz-8)}pre.codeblock{padding:0}code[class*=language-],pre[class*=language-]{font-family:JetBrains Mono,monospace;font-size:var(--sz-4)}</style></head><body class="no-js"><input class="nav__toggle hide" id="nav-toggle" type="checkbox"><div class="nav"><div class="nav__content"><nav class="nav__nav"><a class="nav__home" href="../../index.html" data-sound="CLICK" data-sound-trigger="mousedown" title="Go Home"><span class="hide">Home</span><svg class="bear nav__bear bear--party-hover" viewBox="8 8 296 284" xmlns="http://www.w3.org/2000/svg"><defs><g class="shades__glare" id="partyBearglare"><path d="M89.037 77.41L50.307 216.33c7.356.405 14.995-.214 21.679-.449.327-.011.651-.04.979-.058l37.923-136.125c-4.114-.909-8.221-1.528-12.122-1.97-3.242-.13-6.485-.236-9.73-.316zm-9.634-2.19c-1.733.003-3.468 0-5.197.02-1.45.023-2.997.066-4.563.12L31.957 207.626c2.319 2.45 5.056 4.254 8.08 5.562L79.403 75.221z"></path></g><clipPath id="partyBearspectaclesLeft"><path transform="translate(-2 -1)" d="M63.208 104.241c-13.529.225-33.268.946-38.193 16.429-4.395 20.45-4.187 43.933 7.69 61.188 9.919 14.41 31.334 11.583 47.283 11.023 25.345-.889 47.122-20.629 53.854-44.776 2.588-10.397 5.238-15.686.934-25.992-10.264-12.007-26.954-15.795-41.01-17.39a595.341 595.341 0 00-30.558-.482z"></path></clipPath><clipPath id="partyBearspectaclesRight"><path transform="translate(-3 -1)" d="M236.518 104.241c13.529.225 33.268.946 38.195 16.429 4.393 20.45 4.184 43.933-7.693 61.188-9.918 14.41-31.333 11.583-47.281 11.023-25.346-.889-47.123-20.629-53.856-44.776-2.586-10.397-5.237-15.686-.933-25.992 10.264-12.007 26.956-15.795 41.01-17.39 10.18-.422 20.37-.583 30.558-.482z"></path></clipPath><g class="partyBear__party-block" id="partyBearrainbowBlock"><rect fill="#fa4d32" ry="0" y="79.4" x="182" height="12.6" width="159"></rect><rect fill="#fdb020" width="159" height="12.6" x="182" y="92" ry="0"></rect><rect fill="#fdf133" ry="0" y="104.6" x="182" height="12.6" width="159"></rect><rect fill="#1ce590" width="159" height="12.6" x="182" y="117.1" ry="0"></rect><rect fill="#13a1e3" ry="0" y="129.7" x="182" height="12.6" width="159"></rect><rect fill="#7e2ae4" width="159" height="12.6" x="182" y="142.3" ry="0"></rect><rect fill="#9e4ea5" ry="0" y="154.8" x="182" height="12.6" width="159"></rect></g><g id="partyBearparty"><use href="#partyBearrainbowBlock" transform=""></use><use href="#partyBearrainbowBlock" transform="" y="88.2"></use></g><clipPath id="partyBearheadClip"><path d="M40 29C22 29 8 43 8 60c0 16 12 29 28 31-7 15-11 35-11 58 0 82 50 142 122 142 71 0 127-60 127-142 0-23-5-43-12-58 16-2 28-15 28-31 0-17-14-31-32-31-15 0-28 10-31 24-22-14-49-20-80-20-30 0-56 6-77 19-3-13-16-23-30-23z"></path></clipPath></defs><path class="bear__head" d="M274.479 149.029c0 82.141-55.472 142.532-126.957 142.532-71.486 0-122-60.391-122-142.532 0-82.142 50.514-115.264 121.999-115.264 71.486 0 126.957 33.122 126.957 115.263l.001.001z"></path><path class="bear__ear" d="M40.442 91.262c17.6 0 31.866-13.876 31.866-30.993 0-17.117-14.267-30.993-31.866-30.993S8.576 43.152 8.576 60.269c0 17.117 14.267 30.993 31.866 30.993z"></path><path class="bear__ear" d="M258.951 91.262c-17.599 0-31.866-13.876-31.866-30.993 0-17.117 14.267-30.993 31.866-30.993s31.866 13.876 31.866 30.993c0 17.117-14.267 30.993-31.866 30.993z"></path><g clip-path="url(#partyBearheadClip)"><g transform="rotate(-45)"><g class="party-lines"><use transform="translate(-1000 -300) scale(4 4)" height="100%" width="100%" href="#partyBearparty"></use></g></g></g><path class="bear__muzzle" d="M233.045 235.173c0 26.696-37.734 52.058-84.285 52.058-46.548 0-81.804-25.362-81.804-52.06 0-26.696 35.256-44.62 81.804-44.62 46.551 0 84.285 17.924 84.285 44.622z"></path><path class="bear__nose" d="M189.044 199.847c0 10.268-25.534 32.846-40.594 32.846-15.06 0-43.07-22.578-43.07-32.846 0-10.269 28.012-16.732 43.072-16.732 15.06 0 40.593 6.463 40.593 16.732h-.001z"></path><path class="bear__ear-inner" d="M62.543 58.438c-.471-5.386-3.004-10.404-7.096-14.062-4.092-3.658-9.447-5.69-15.005-5.693-5.886 0-11.53 2.275-15.692 6.323-4.162 4.047-6.5 9.537-6.5 15.262 0 2.834.574 5.64 1.69 8.26a21.554 21.554 0 004.81 7.002 22.245 22.245 0 007.2 4.68 22.74 22.74 0 0010.01 1.59c1.093-1.792 2.122-3.656 3.314-5.34a88.09 88.09 0 016.779-8.426 87.952 87.952 0 017.661-7.44c.896-.773 1.9-1.42 2.829-2.156z"></path><path class="bear__ear-inner" d="M236.852 58.438c.471-5.386 3.003-10.404 7.096-14.062 4.092-3.658 9.447-5.69 15.005-5.693 5.886 0 11.53 2.275 15.692 6.323 4.161 4.047 6.499 9.537 6.499 15.262a21.06 21.06 0 01-1.688 8.26 21.565 21.565 0 01-4.811 7.003 22.254 22.254 0 01-7.2 4.679 22.74 22.74 0 01-10.01 1.59c-1.095-1.792-2.122-3.656-3.315-5.34a88.105 88.105 0 00-6.779-8.426 88.163 88.163 0 00-7.66-7.44c-.899-.773-1.902-1.42-2.83-2.156h.001z"></path><path class="bear__cap-strap bear__cap-strap--main" d="M146.958 43.742c-17.965 0-34.897 1.447-50.519 4.47v15.226c15.622-3.024 32.554-4.471 50.519-4.471 20.255 0 39.506 1.841 57.218 5.707V49.447c-17.712-3.867-36.964-5.705-57.218-5.705z"></path><path class="bear__cap-strap" d="M170.378 44.62c3.81 1.951 5.939 4.552 5.941 7.258-.006 1.49-.656 2.96-1.908 4.316-1.252 1.356-3.077 2.565-5.353 3.547 12.225.875 23.975 2.502 35.117 4.935v-15.23c-10.738-2.343-22.047-3.93-33.797-4.827v.001z"></path><path class="bear__cap" d="M147.837 8.445C89.515 8.445 46.163 33.04 36.223 92.55 52.748 78.447 73.134 69.01 96.44 63.703c0 0-3.666-18.477 13.746-21.495 17.411-3.018 18.808-5.364 36.773-5.364 20.254 0 22.023.59 41.125 5.364 19.103 4.775 16.092 22.95 16.092 22.95 23.09 5.928 43.562 15.91 60.213 30.454-9.756-61.728-57.241-87.167-116.552-87.167z"></path><g class="bear__shades shades"><path class="shades__frame" d="M52.493 96.378c-8.728-.094-17.92.244-30.576 2.858l-19.201 3.713 3.095 20.167c2.808.393 6.684 1.362 8.518 3.819 4.731 6.333 1.612 12.453 2.686 23.636 3.58 37.256 15.986 45.054 35.199 47.295 10.06 1.173 30.597 3.06 44.63-1.922 12.681-4.502 24.438-13.233 32.397-24.085 8.414-11.47 9.318-24.715 14.541-34.76 3.701-7.121 10.326-5.077 12.415.523 3.958 10.608 5.873 22.767 14.287 34.237 7.959 10.852 19.716 19.583 32.398 24.085 14.031 4.982 34.568 3.095 44.629 1.922 19.212-2.241 31.619-10.039 35.201-47.295 1.074-11.183-2.045-17.303 2.686-23.636 1.896-2.538 5.985-3.501 8.807-3.869l3.08-20.065-19.474-3.765c-20.25-4.184-31.637-2.535-46.432-2.625-5.489-.033-11.77.155-17.616.769-10.896 1.146-21.692 3.194-32.418 5.431-10.712 2.233-20.906 8.18-31.846 7.969-10.551-.206-20.07-6.675-30.394-8.873-10.905-2.322-19.88-4.165-33.141-4.527-6.429-.174-12.127-.802-17.616-.769-5.548.035-10.618-.177-15.855-.233z"></path><path class="shades__lens shades__lens--left" d="M63.208 104.241c-13.529.225-33.268.946-38.193 16.429-4.395 20.45-4.187 43.933 7.69 61.188 9.919 14.41 31.334 11.583 47.283 11.023 25.345-.889 47.122-20.629 53.854-44.776 2.588-10.397 5.238-15.686.934-25.992-10.264-12.007-26.954-15.795-41.01-17.39a595.341 595.341 0 00-30.558-.482z"></path><path class="shades__detail" d="M23.995 109.374c0 .6-.572 1.175-1.592 1.601-1.02.425-2.404.665-3.85.668-1.446.003-2.836-.231-3.866-.652-1.03-.421-1.617-.994-1.632-1.594-.015-.6.543-1.178 1.552-1.608 1.01-.43 2.389-.676 3.835-.685 1.446-.009 2.842.219 3.883.636 1.04.417 1.64.987 1.67 1.587"></path><path class="shades__lens shades__lens--right" d="M236.518 104.241c13.529.225 33.268.946 38.195 16.429 4.393 20.45 4.184 43.933-7.693 61.188-9.918 14.41-31.333 11.583-47.281 11.023-25.346-.889-47.123-20.629-53.856-44.776-2.586-10.397-5.237-15.686-.933-25.992 10.264-12.007 26.956-15.795 41.01-17.39 10.18-.422 20.37-.583 30.558-.482z"></path><path class="shades__detail" d="M275.731 109.374c0 .6.572 1.175 1.592 1.601 1.02.425 2.404.665 3.85.668 1.446.003 2.836-.231 3.867-.652 1.03-.421 1.616-.994 1.631-1.594.016-.6-.543-1.178-1.552-1.608-1.01-.43-2.389-.676-3.835-.685-1.446-.009-2.842.219-3.882.636-1.041.417-1.641.987-1.67 1.587"></path><g clip-path="url(#partyBearspectaclesLeft)"><g class="shades__glare-container"><use href="#partyBearglare"></use></g></g><g clip-path="url(#partyBearspectaclesRight)"><g class="shades__glare-container"><use href="#partyBearglare"></use></g></g></g></svg></a><label class="nav__toggle-control nav-control" for="nav-toggle"><span>Menu Collapsed</span><span>Menu Expanded</span><svg class="nav__icon" viewBox="0 0 24 24" role="img"><title>Menu icon</title><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path></svg></label><button class="nav__button nav-control" aria-haspopup="true" aria-expanded="false" aria-controls="nav" aria-pressed="false"><span>Menu Collapsed</span><span>Menu Expanded</span><svg class="nav__icon" viewBox="0 0 24 24" role="img"><title>Menu icon</title><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="var(--color)"></path></svg></button><ul class="nav__items" id="nav"><li><a class="nav__link" href="../../index.html" data-sound="CLICK" data-sound-trigger="mousedown">Home</a></li><li><a class="nav__link" href="../../index.html#" data-sound="CLICK" data-sound-trigger="mousedown">Home</a></li><li><a class="nav__link" href="../index.html" data-sound="CLICK" data-sound-trigger="mousedown">Writing</a></li><li><a class="nav__link" href="../../scrapbook/index.html" data-sound="CLICK" data-sound-trigger="mousedown">Scrapbook</a></li><li><a class="nav__link" href="../../code/index.html" data-sound="CLICK" data-sound-trigger="mousedown">Code</a></li><li><a class="nav__link" href="../../about/index.html" data-sound="CLICK" data-sound-trigger="mousedown">About</a></li><li><a class="nav__link" href="../../contact/index.html" data-sound="CLICK" data-sound-trigger="mousedown">Contact</a></li></ul></nav><aside class="nav__settings"><button class="settings-toggle nav-control" aria-expanded="false" aria-haspopup="true" aria_controls="settings" aria-pressed="false" data-sound="SWITCH_ON" data-sound-trigger="mousedown"><span class="hide">Settings closed</span><span class="hide">Settings open</span><svg viewBox="0 0 24 24" role="img"><title>Settings icon</title><path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" fill="var(--color)"></path><path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" fill="var(--color)"></path></svg></button><div class="settings-controls" id="settings"><button class="settings-control audio-toggle nav-control" aria-pressed="false" data-sound="PHASER_DOWN" data-sound-trigger="mousedown"><span class="hide">Audio on</span><span class="hide">Audio off</span><svg viewBox="0 0 24 24" role="img"><title>Audio icon</title><path d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z" fill="var(--color)"></path><path d="M12,4L9.91,6.09L12,8.18M4.27,3L3,4.27L7.73,9H3V15H7L12,20V13.27L16.25,17.53C15.58,18.04 14.83,18.46 14,18.7V20.77C15.38,20.45 16.63,19.82 17.68,18.96L19.73,21L21,19.73L12,10.73M19,12C19,12.94 18.8,13.82 18.46,14.64L19.97,16.15C20.62,14.91 21,13.5 21,12C21,7.72 18,4.14 14,3.23V5.29C16.89,6.15 19,8.83 19,12M16.5,12C16.5,10.23 15.5,8.71 14,7.97V10.18L16.45,12.63C16.5,12.43 16.5,12.21 16.5,12Z" fill="var(--color)"></path></svg></button><button class="settings-control nav-control theme-toggle" aria-pressed="false" data-sound="SWITCH_ON" data-sound-trigger="mousedown"><span class="hide">Light theme</span><span class="hide">Dark theme</span><svg class="theme-toggle__icon" viewBox="0 0 24 24" role="img"><title>Theme icon</title><path d="M3.55,18.54L4.96,19.95L6.76,18.16L5.34,16.74M11,22.45C11.32,22.45 13,22.45 13,22.45V19.5H11M12,5.5A6,6 0 0,0 6,11.5A6,6 0 0,0 12,17.5A6,6 0 0,0 18,11.5C18,8.18 15.31,5.5 12,5.5M20,12.5H23V10.5H20M17.24,18.16L19.04,19.95L20.45,18.54L18.66,16.74M20.45,4.46L19.04,3.05L17.24,4.84L18.66,6.26M13,0.55H11V3.5H13M4,10.5H1V12.5H4M6.76,4.84L4.96,3.05L3.55,4.46L5.34,6.26L6.76,4.84Z" fill="var(--color)"></path><path d="M9,2C7.95,2 6.95,2.16 6,2.46C10.06,3.73 13,7.5 13,12C13,16.5 10.06,20.27 6,21.54C6.95,21.84 7.95,22 9,22A10,10 0 0,0 19,12A10,10 0 0,0 9,2Z" fill="var(--color)"></path></svg></button></div></aside></div></div><label class="nav__cloak" aria-hidden="true" for="nav-toggle"></label><div class="layout layout--nav"><main><div class="layout__hero"><picture><source type="image/avif" srcset="/assets/enhanced/91db04e3-768.avif 768w" sizes="768px"><source type="image/webp" srcset="/assets/enhanced/91db04e3-768.webp 768w" sizes="768px"><img src="../../assets/enhanced/91db04e3-768.png" width="768" height="510" alt="" loading="lazy" decoding="async"></picture></div><article class="post"><h1 class="post__title">How To: Looping Block Reveal Effect</h1><div class="post__details"><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M14,14H7V16H14M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M17,10H7V12H17V10Z" fill="var(--color)"></path></svg><span class="post__detail-content">Jul 10, 2019</span></div><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M6.5 10C7.3 10 8 9.3 8 8.5S7.3 7 6.5 7 5 7.7 5 8.5 5.7 10 6.5 10M9 6L16 13L11 18L4 11V6H9M9 4H4C2.9 4 2 4.9 2 6V11C2 11.6 2.2 12.1 2.6 12.4L9.6 19.4C9.9 19.8 10.4 20 11 20S12.1 19.8 12.4 19.4L17.4 14.4C17.8 14 18 13.5 18 13C18 12.4 17.8 11.9 17.4 11.6L10.4 4.6C10.1 4.2 9.6 4 9 4M13.5 5.7L14.5 4.7L21.4 11.6C21.8 12 22 12.5 22 13S21.8 14.1 21.4 14.4L16 19.8L15 18.8L20.7 13L13.5 5.7Z" fill="var(--color)"></path></svg><span class="post__detail-content"><a href="../index06ac.html?tag=css">Css</a><span>, </span><a href="../indexc2d0.html?tag=javascript">Javascript</a><span>, </span><a href="../index55d9.html?tag=animation">Animation</a></span></div><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M12,20A7,7 0 0,1 5,13A7,7 0 0,1 12,6A7,7 0 0,1 19,13A7,7 0 0,1 12,20M19.03,7.39L20.45,5.97C20,5.46 19.55,5 19.04,4.56L17.62,6C16.07,4.74 14.12,4 12,4A9,9 0 0,0 3,13A9,9 0 0,0 12,22C17,22 21,17.97 21,13C21,10.88 20.26,8.93 19.03,7.39M11,14H13V8H11M15,1H9V3H15V1Z" fill="var(--color)"></path></svg><span class="post__detail-content">~10min</span></div><div class="post__detail"><svg class="post__details-icon" viewBox="0 0 24 24" role="img"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" fill="#1da1f2"></path></svg><a href="https://twitter.com/intent/tweet?text=How%20To:%20Looping%20Block%20Reveal%20Effect%20https://jhey.dev/writing/how-to-looping-block-reveal-effect/%20via%20@jh3yy" target="_blank" rel="noopener noreferrer">Share on Twitter</a></div></div><div class="post__content"><blockquote><p>Add a little “pizzazz” to your site&nbsp;✨</p></blockquote><p>I’m sure we’ve all seen the effect. A block slides in, slides out and reveals some text. Simple enough when we only want to animate in some content. Can even achieve that with only CSS. But what about when we want to loop between content? From one phrase to the next for example.</p><p>It gets a little trickier.</p><p>For those in camp <strong>TL;DR</strong>, you can check out the code in the CodePen collection at the bottom of the article 👍 All the code required is available there 👍</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_mx1UQcpAhScuaptJ17Y3qw.gif" alt="Text Reveal Slide with no loop"></p><h2 class="post__heading post-heading" tabindex="-1" id="pure-css-with-no-loop"><span class="post-heading__content">Pure CSS with no&nbsp;loop. <a href="#pure-css-with-no-loop" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Let’s start by creating a pure CSS block reveal with no loop.</p><p>This will give us a better understanding of the problem we face when we want to start looping. We can reuse some stuff too 👍</p><p>Let’s start with the markup.</p><pre class="language-html codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">html</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Hey<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>there<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>reader!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span></code></pre><p>All we need is a container with elements for each block of text we want to reveal.</p><p>Now for the styling 👍</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">align-items</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token selector">.block-reveal span</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 4rem<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Our container will use <code>display: inline-flex</code>. This is so we can keep our text blocks stacked whilst the container takes up as little space as possible. This gives us more flexibility when it comes to incorporating our block reveal into a layout. We might also consider using <code>display: grid</code> 👍</p><p><img src="../../../cdn-images-1.medium.com/max/800/1__1eb7xAje9840d1Zx47T4w.png" alt="Static stacked styled words"></p><p>Now for the blocks. The trick here will be to use <code>pseudo</code> elements on our <code>span</code>. These can then slide in and out with an animation. We can run a second animation in parallel that reveals the text content 👍</p><p>Let’s start by creating the blocks.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal span</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token selector">.block-reveal span:after</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> #1e90ff<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Setting <code>opacity: 0.5</code> whilst we put everything together.</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_rSY31qMXitAbGO9fYkjsjA.png" alt="Blocks in place"></p><p>Now let’s animate those blocks from left to right. We need to also set <code>overflow: hidden</code> on our <code>span</code>. Otherwise, the blocks won’t vanish!</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal span:after</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">animation</span><span class="token punctuation">:</span> block-reveal 0.5s both<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token atrule"><span class="token rule">@keyframes</span> block-reveal</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">0%</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-110%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token selector">45%, 55%</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token selector">100%</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>110%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>That will give us this</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_x75BxTj0L2hoAdquCXJ8Tg.gif" alt="Simultaneous blocks sliding in and out over the words"></p><p>That won’t do though 👎 We want our blocks to stagger. Let’s animate our text in first and come back to that stagger later.</p><p>We may think to animate the <code>opacity</code> of our <code>span</code> here. This would affect the pseudo element though and ruin the effect. To get round this, we can animate <code>color</code> from <code>transparent</code> to a <code>color</code> we desire.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal span</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">animation</span><span class="token punctuation">:</span> show-text 0.5s both<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token atrule"><span class="token rule">@keyframes</span> show-text</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">0%</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token selector">50%, 100%</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>We will leverage <code>animation-fill-mode: both</code> for our animations. This will play a crucial part when we stagger the reveal 💪</p><p>We match up the timing so our text reveals when the block is covering the <code>span</code>.</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_hnBfiMSPyGF9JWraqvyfHg.gif" alt="Text easing in at the wrong time"></p><p>That doesn’t look right&nbsp;👎</p><p>Hold up. That doesn’t look right. The trick here is to adjust the <code>animation-timing-function</code> to use <code>steps</code>. Doing so will make our text appear at an exact point without doing percentage hacks in our keyframes.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal span</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">animation</span><span class="token punctuation">:</span> show-text 0.5s <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span> both<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p><img src="../../../cdn-images-1.medium.com/max/800/1_EF_1LL9dNUXJ4mBUI7h2ZQ.gif" alt="Slowed down animation to inspect with &quot;Animations Inspector&quot;"></p><p>Using the <code>Chrome Animations inspector</code> to slow things right down, we can confirm the animation timeline is correct. In this case slowing the animation right down to <code>10%</code> means you can check everything is in order.</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_eBaamJJS_DXiznhENvB4sw.png" alt="A view of the Google Chrome &quot;Animations Inspector&quot; tool showing that the text is revealed at the correct time"></p><p>Animations inspector shows that text is revealed at the point our block is paused in the middle&nbsp;👍</p><p><strong>⚠️️ <em>Note::</em></strong> <em>that in a performance critical set up it could be preferable to use</em> <code>opacity</code> <em>to reveal the text. To do this, we could wrap each</em> <code>span</code> <em>again and use the pseudo element of that wrapper as the block.</em></p><hr><p>Right. Let’s add that stagger. There’s a few ways we can do this. The simplest is going to be applying an <code>animation-delay</code> via the <code>nth-child</code> selector.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="token selector">.block-reveal span:nth-child(1),
.block-reveal span:nth-child(1):after</span> <span class="token punctuation">{</span> <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.1s<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">.block-reveal span:nth-child(2),
.block-reveal span:nth-child(2):after</span> <span class="token punctuation">{</span> <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.2s<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">.block-reveal span:nth-child(3),
.block-reveal span:nth-child(3):after</span> <span class="token punctuation">{</span> <span class="token property">animation-delay</span><span class="token punctuation">:</span> 1.3s<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><p>We could clean this up a little with inline CSS variables.</p><pre class="language-html codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">html</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--delay</span><span class="token punctuation">:</span> 1.1<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Hey<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--delay</span><span class="token punctuation">:</span> 1.2<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>there<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">--delay</span><span class="token punctuation">:</span> 1.3<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>reader!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span></code></pre><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal span</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">animation</span><span class="token punctuation">:</span> show-text 0.5s <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--delay<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> * 1s<span class="token punctuation">)</span> <span class="token function">steps</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span> both<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token selector">.block-reveal span:after</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">animation</span><span class="token punctuation">:</span> block-reveal 0.5s <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--delay<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> * 1s<span class="token punctuation">)</span> both<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Remove the <code>opacity</code> declaration from our block and we get</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_a1gVLuJxg8qNFHCCUDq4vw.gif" alt="Animation working as expected"></p><p>Nice 🎉</p><p>Great! That’s what we wanted. We could always take it a little further with those inline CSS variables. We could define the speed, different colors etc.</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_v03wSIoJHTFItDJNSeQCXQ.gif" alt="Making use of more inline CSS variables ✨"></p><p class="codepen" data-theme-id="dark" data-default-tab="result" data-user="jh3y" data-slug-hash="PrVBpO" data-preview="true" data-editable="true"><span>Check out <a href="https://codepen.io/jh3y/pen/PrVBpO" target="_blank" rel="noopener noreferrer">this pen</a> by Jhey (<a href="https://codepen.io/jh3y" target="_blank" rel="noopener noreferrer">@jh3y</a>) on <a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen</a>.</span></p><script async="" src="../../../cpwebassets.codepen.io/assets/embed/ei.js"></script><h2 class="post__heading post-heading" tabindex="-1" id="cant-we-loop-this?"><span class="post-heading__content">Can’t we loop&nbsp;this? <a href="#cant-we-loop-this?" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Consider we only have one block and we want to cycle through the words “Hey”, “there” and “reader!”.</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_Y_xzvcvlRTCCMTGwWKv_EA.gif" alt="Example looping block reveal"></p><p>The block needs to size dynamically 🤔</p><p>To do this with only CSS would be tricky. There’s a few hurdles to overcome. We would need to account for animating different blocks across the words. We could try and animate blocks for each word in parallel. We could try to create animations with large pauses and sync them up. Chrome’s Animations inspector would be invaluable for this.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token comment">/* Example keyframe with large built-in delay to account for looping */</span></span>
<span class="highlight-line"><span class="token atrule"><span class="token rule">@keyframes</span> block-reveal-show-text--1</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token selector">0%, 30%, 100%</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token selector">15%, 30%</span> <span class="token punctuation">{</span> <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>One of the major issues is the fact that our words are likely to differ in length. If the next word is shorter than the current word, the next block won’t cover the current word. We would need to run the reveal twice. Once to reveal the word and once to hide. But as the blocks animate at the same speed and cover different sizes, this might look a little off.</p><p>Any solution is also going to be tricky to maintain when our phrases grow. We would also need to account for staggering. The issue with a pure CSS solution is not only the maintainability, but scalability.</p><h2 class="post__heading post-heading" tabindex="-1" id="a-javascript-solution"><span class="post-heading__content">A JavaScript solution <a href="#a-javascript-solution" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>With JavaScript we can create a maintainable and scalable solution. As we are going to handle animation from our JavaScript code, we will use <a href="https://greensock.com/" target="_blank" rel="noopener noreferrer">GreenSock</a>(GSAP).</p><div class="post__embed-container"><iframe loading="lazy" class="post__embed" src="https://www.youtube.com/embed/-riXBjDfvOw" allow="encrypted-media; picture-in-picture"></iframe></div><p>Don’t worry if you haven’t used GSAP before. The code is intuitive and I will explain each part.</p><h3 class="post__heading post-heading" tabindex="-1" id="markup"><span class="post-heading__content">Markup <a href="#markup" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h3><p>Now we are going to loop through phrases, our markup will need to change. Consider an example where we first show “Hey there reader!” followed by “How are you?”. Our markup structure needs to compliment what we are trying to achieve. It needs to be easy for us to access the next word to reveal on a line as we loop.</p><p><code>GSAP</code> also doesn’t have the ability to animate pseudo elements. So we will need to add an extra element to our lines that acts as the sliding block.</p><p>Instead of;</p><pre class="language-html codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">html</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Hey<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>there<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>reader!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span></code></pre><p>Something like the following will be more suitable;</p><pre class="language-html codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">html</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__line<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__word<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Hey<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__word<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>How<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__block<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__line<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__word<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>there<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__word<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>are<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__block<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__line<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__word<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>reader<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__word<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>you?<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>block-reveal__block<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span></code></pre><p>New markup structure will make things easier&nbsp;💪</p><p>This does make it trickier to generate our markup. We could delegate this to our <code>JavaScript</code> later on if we wish. And for a <code>React</code> version, we would need to.</p><h2 class="post__heading post-heading" tabindex="-1" id="styling"><span class="post-heading__content">Styling <a href="#styling" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Our container styling remains the same. We also transfer the pseudo element styling from before to the new block elements.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token selector">.block-reveal__block</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">background</span><span class="token punctuation">:</span> #639<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span> <span class="token comment">/* For dev */</span></span>
<span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>We want all the words in a line to sit on top of each other. But, we want to avoid using <code>absolute</code> positioning. This would make positioning the block reveal container in a layout tricky.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal__line</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">justify-items</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token selector">.block-reveal__word</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">font-size</span><span class="token punctuation">:</span> 4rem<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">grid-column</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">grid-row</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>The trick here is to use <code>display: grid</code> on the line elements and make every word sit in the first column and row of that grid. That way our container doesn’t lose its width due to <code>absolute</code> positioned children 🎉</p><p><img src="../../../cdn-images-1.medium.com/max/800/1_6SHI5tQqurNkAv0nGG2dHA.png" alt="All the words overlapped in a container"></p><p>Looks like a mess, but this is exactly what we want&nbsp;👍</p><p>Now everything is sitting in the right place we can hide the text and blocks.</p><pre class="language-css codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">css</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-css"><span class="highlight-line"><span class="token selector">.block-reveal__block</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">transform-origin</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span></span>
<span class="highlight-line">  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token selector">.block-reveal__word</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>As the line element will be the width of the largest word, sliding the block across won’t work as it did. The solution is to increase the scaled width of the block from <code>0</code> to <code>1</code> changing the <code>transform-origin</code> at the mid point. Before doing that, we calculate and set how big the block should be. Its size should match whichever is biggest out of the current word and the next word 👍</p><h2 class="post__heading post-heading" tabindex="-1" id="javascript"><span class="post-heading__content">JavaScript <a href="#javascript" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>Let’s start by creating a new <code>class</code> for our block reveal. This <code>class</code> will accept parameters for a <code>DOM</code> element and an options <code>Object</code>.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">BlockReveal</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  element <span class="token operator">=</span> <span class="token keyword">undefined</span></span>
<span class="highlight-line">  options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> element</span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> <span class="token operator">...</span>options <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Those options will define timings for our block reveal that are passed into GSAP 📽</p><p>As we will need to make some DOM related queries, let’s store our classes in a <code>CLASSES</code> Object for reference.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token constant">CLASSES</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token constant">BLOCK</span><span class="token operator">:</span> <span class="token string">'block-reveal__block'</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token constant">LINE</span><span class="token operator">:</span> <span class="token string">'block-reveal__line'</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token constant">WORD</span><span class="token operator">:</span> <span class="token string">'block-reveal__word'</span><span class="token punctuation">,</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>We now have a choice to make. If our lines don’t have the same number of children, should we pad them out or throw an <code>Error</code>? For this solution, let’s make that check in the <code>constructor</code> and throw an <code>Error</code> if there’s a mismatch 💪</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">this</span><span class="token punctuation">.</span>wordsPerLine <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element</span>
<span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">LINE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">WORD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>length</span>
<span class="highlight-line"><span class="token keyword">const</span> sameLineLength <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="highlight-line">  <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">LINE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span></span>
<span class="highlight-line">  <span class="token parameter">v</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">WORD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>wordsPerLine</span>
<span class="highlight-line"><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sameLength<span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'BlockReveal: Lines need to be the same amount of words'</span><span class="token punctuation">)</span></span></code></pre><p>Now we’ve made our check and know we can proceed. Let’s cache all the elements we will need access to and store them on the class instance.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">class</span> <span class="token class-name">BlockReveal</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  element <span class="token operator">=</span> <span class="token keyword">undefined</span></span>
<span class="highlight-line">  elementCache <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    blocks<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    words<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="highlight-line">  wordsPerLine <span class="token operator">=</span> <span class="token keyword">undefined</span></span>
<span class="highlight-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token function-variable function">cacheElements</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token comment">// Cache the blocks</span></span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>blocks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span></span>
<span class="highlight-line">      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">BLOCK</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span></span>
<span class="highlight-line">    <span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>wordsPerLine<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>words<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span></span>
<span class="highlight-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span></span>
<span class="highlight-line">          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">LINE</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> .</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CLASSES</span><span class="token punctuation">.</span><span class="token constant">WORD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:nth-of-type(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span></span>
<span class="highlight-line">        <span class="token punctuation">)</span></span>
<span class="highlight-line">      <span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Now we can get started on the magic with GSAP ✨</p><p>The idea is that we create a <code>GSAP Timeline</code> that staggers animating the blocks to reveal the words. Repeating the <code>Timeline</code> will reveal the next set of words and so on.</p><p>There are two major steps to the <code>Timeline</code> 🎥</p><ol><li>Animate the blocks in.</li><li>Animate the blocks out.</li></ol><p>The trick is to hook into the onStart and onComplete when we animate the blocks in. At this point we are able to show/hide the words whilst updating the transform-origin on the blocks 👌</p><p>To do this, we need to track the index of the current word we are on. We can then use this index to grab elements from the <code>elementCache</code>.</p><p>Let’s start by creating the <code>Timeline</code>.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token constant">TL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimelineMax</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="highlight-line">  delay<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  repeat<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  repeatDelay<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre><p><code>delay</code> is the initial delay before our Block Reveal starts. <code>repeat</code> is the number of reveals that happen. Setting <code>repeat: -1</code> will infinitely loop our Block Reveal 👌 We have two phrases, so <code>repeat: 2</code> would reveal our first phrase, then the second and stop. Lastly, <code>repeatDelay</code> is the delay between each reveal 👍</p><p>The <code>options</code> used for our <code>TimelineMax</code> could be passed in when we instantiate the class 😉 We will update the <code>options</code> on our class to hold <code>defaults</code> that can be extended and referenced.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  options<span class="token operator">:</span> <span class="token punctuation">{</span> delay<span class="token punctuation">,</span> repeat<span class="token punctuation">,</span> repeatDelay <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line"><span class="token keyword">const</span> <span class="token constant">TL</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimelineMax</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="highlight-line">  delay<span class="token punctuation">,</span></span>
<span class="highlight-line">  repeat<span class="token punctuation">,</span></span>
<span class="highlight-line">  repeatDelay<span class="token punctuation">,</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre><p>Let’s add the first step to our <code>Timeline</code>.</p><p><code>GSAP</code> provides the perfect API for our needs. <code>staggerTo</code> allows us to animate all of our blocks at the same time with a slight <code>stagger</code>.</p><div class="post__embed-container"><iframe loading="lazy" class="post__embed" src="https://www.youtube.com/embed/DbED_akR1Xo" allow="encrypted-media; picture-in-picture"></iframe></div><p>This is the trickiest part to all of our Block Reveal so bear with it 💪 🐻</p><p>We need to add a <code>staggerTo</code> call to our <code>Timeline</code> that animates the X scale on our blocks.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token constant">TL</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span></span>
<span class="highlight-line">  TweenMax<span class="token punctuation">.</span><span class="token function">staggerTo</span><span class="token punctuation">(</span></span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>blocks<span class="token punctuation">,</span></span>
<span class="highlight-line">    <span class="token number">0.4</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    <span class="token punctuation">{</span> onStart<span class="token punctuation">,</span> transformOrigin<span class="token operator">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span> scaleX<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    <span class="token number">0.2</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    onComplete</span>
<span class="highlight-line">  <span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">)</span></span></code></pre><p>This code animates all our block elements in a stagger from <code>transform: scaleX(0)</code> to <code>transform: scaleX(1)</code>. Each animation takes <code>0.4</code> seconds and the animations are staggered by <code>0.2</code> seconds.</p><hr><h3 class="post__heading post-heading" tabindex="-1" id="onstart"><span class="post-heading__content">onStart <a href="#onstart" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h3><p>In our <code>onStart</code> we will resize our blocks’ widths to that of the largest between the current word and the next word.</p><p>We iterate through the next words and compare their width to the current words. Whichever has the largest width becomes the width of the block for that reveal. We use <code>getBoundingClientRect</code> and <code>Math.ceil</code> to make sure we cover the word. This accounts for where <code>offsetWidth</code> might return <code>117</code> for a word that is actually <code>117.39</code> pixels wide.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">onStart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> nextWords <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>words<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">]</span></span>
<span class="highlight-line">  newWords<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">word<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> current <span class="token operator">=</span></span>
<span class="highlight-line">      word<span class="token punctuation">.</span>previousElementSibling <span class="token operator">||</span></span>
<span class="highlight-line">      word<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>wordsPerLine <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> reveal <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>blocks<span class="token punctuation">[</span>index<span class="token punctuation">]</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> wordWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> currentWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">getBoudingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span></span>
    reveal<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
<span class="highlight-line">      current<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>wordWidth<span class="token punctuation">,</span> currentWidth<span class="token punctuation">)</span> <span class="token operator">:</span> wordWidth</span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>But wait, wouldn’t it make more sense to cache the reveal widths for each index too? Yes, we could do that so we needn’t make the comparisons on each animation 👍</p><p>We can add a new method on the class that we invoke in the <code>constructor</code> after creating the <code>elementCache</code>.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token function-variable function">cacheBlockWidths</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token comment">// Iterate through the elementCache words</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>words<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">phrase</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> blockWidths <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="highlight-line">    <span class="token comment">// For each word in the phrase, calculate the correct block width</span></span>
<span class="highlight-line">    phrase<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">word</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">      <span class="token keyword">const</span> current <span class="token operator">=</span></span>
<span class="highlight-line">        word<span class="token punctuation">.</span>previousElementSibling <span class="token operator">||</span></span>
<span class="highlight-line">        word<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>wordsPerLine <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="highlight-line">      <span class="token keyword">const</span> wordWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span></span>
<span class="highlight-line">      <span class="token keyword">const</span> currentWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span></span>
<span class="highlight-line">      blockWidths<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>wordWidth<span class="token punctuation">,</span> currentWidth<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>blockWidths<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>blockWidths<span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
  <span class="token comment">/**
<span class="highlight-line">   * Push one last set of widths which equate to when everything is blank</span>
<span class="highlight-line">   * and we are revealing the first set of words.</span>
   */</span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>blockWidths<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span></span>
<span class="highlight-line">    <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>words<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">word</span> <span class="token operator">=&gt;</span></span>
<span class="highlight-line">      Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span></span>
<span class="highlight-line">    <span class="token punctuation">)</span></span>
<span class="highlight-line">  <span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>That last part is important. When we start, we see no text. The first set of block widths before looping should equal the width of the first words we see.</p><p>⚠️ <em><strong>NOTE::</strong> One thing to bear in mind here is responsive font sizes. We will likely need to restart the animation and re-cache the block widths on page resize.</em></p><p>Now we can update our <code>onStart</code> to set the reveal size by looking up the cached block widths. We can add a counter variable to our class so we know when to use that set of widths equal to the first words.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">onStart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> nextWords <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>words<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">]</span></span>
<span class="highlight-line">  nextWords<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">word<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    <span class="token keyword">const</span> block <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>blocks<span class="token punctuation">[</span>index<span class="token punctuation">]</span></span>
    block<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
<span class="highlight-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>blockWidths<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>ran <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>wordsPerLine<span class="token punctuation">]</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span></span>
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>I promise that’s the trickiest bit out of the way now 🙌</p><h3 class="post__heading post-heading" tabindex="-1" id="oncomplete"><span class="post-heading__content">onComplete <a href="#oncomplete" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h3><p>The <code>onComplete</code> grabs all the previous words and sets their <code>opacity</code> to <code>0</code> to hide them. It sets <code>opacity: 1</code> on all the new words to show them. And it sets the <code>transform-origin</code> of all the blocks to <code>right</code>.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">onComplete</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    elementCache<span class="token operator">:</span> <span class="token punctuation">{</span> blocks<span class="token punctuation">,</span> words <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    index<span class="token punctuation">,</span></span>
<span class="highlight-line">    wordsPerLine<span class="token punctuation">,</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> previousWords <span class="token operator">=</span> words<span class="token punctuation">[</span>index <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> wordsPerLine <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="highlight-line">  <span class="token keyword">const</span> newWords <span class="token operator">=</span> words<span class="token punctuation">[</span>index<span class="token punctuation">]</span></span>
<span class="highlight-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> word <span class="token keyword">of</span> previousWords<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    word<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token string">'0'</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> block <span class="token keyword">of</span> blocks<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    block<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transformOrigin <span class="token operator">=</span> <span class="token string">'right'</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> word <span class="token keyword">of</span> newWords<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">    word<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token string">'1'</span></span>
<span class="highlight-line">  <span class="token punctuation">}</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><hr><p>All that’s left is to animate the blocks back out to reveal the next word.</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token constant">TL</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span></span>
<span class="highlight-line">  TweenMax<span class="token punctuation">.</span><span class="token function">staggerTo</span><span class="token punctuation">(</span></span>
<span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>elementCache<span class="token punctuation">.</span>blocks<span class="token punctuation">,</span></span>
<span class="highlight-line">    <span class="token number">0.4</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    <span class="token punctuation">{</span> scaleX<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    <span class="token number">0.2</span><span class="token punctuation">,</span></span>
<span class="highlight-line">    onCompleteOut</span>
<span class="highlight-line">  <span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token punctuation">)</span></span></code></pre><p><code>onCompleteOut</code> is for updating a counter variable and updating the word index. Nothing crazy 👍</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">onCompleteOut</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>wordsPerLine <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>ran <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Tidying up, we can make any animation durations part of our options. We can also make any styling changes we like such as different block colors etc. To infinitely loop the block reveal, set the <code>repeat</code> to <code>-1</code> 👍</p><pre class="language-javascript codeblock"><span class="codeblock__bar">
            <span class="codeblock__label">javascript</span>
            <button class="codeblock__button" data-sound="CHIP" data-sound-trigger="click">Copy</button>
          </span><code class="language-javascript"><span class="highlight-line"><span class="token keyword">const</span> block <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.block-reveal'</span><span class="token punctuation">)</span></span>
<span class="highlight-line"><span class="token keyword">const</span> myBlockReveal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BlockReveal</span><span class="token punctuation">(</span>block<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="highlight-line">  delay<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  repeat<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  repeatDelay<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  blockStagger<span class="token operator">:</span> <span class="token number">0.15</span><span class="token punctuation">,</span></span>
<span class="highlight-line">  blockSlide<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span></span>
<span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="highlight-line">myBlockReveal<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></code></pre><p><img src="../../../cdn-images-1.medium.com/max/800/1_ZuP6bZAitwtzT4LrES0cCA.gif" alt="Finished project showing looping block reveals"></p><h2 class="post__heading post-heading" tabindex="-1" id="thats-it"><span class="post-heading__content">That’s it! <a href="#thats-it" class="post-heading__permalink"><span class="hide">permalink</span> <svg aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path></svg></a></span></h2><p>If you’ve got this far, thank you so much for reading. You can now create a looping Block Reveal effect from scratch using <code>GreenSock</code> 💪</p><p class="codepen" data-theme-id="dark" data-default-tab="result" data-user="jh3y" data-slug-hash="rEPrOb" data-preview="true" data-editable="true"><span>Check out <a href="https://codepen.io/jh3y/pen/rEPrOb" target="_blank" rel="noopener noreferrer">this pen</a> by Jhey (<a href="https://codepen.io/jh3y" target="_blank" rel="noopener noreferrer">@jh3y</a>) on <a href="https://codepen.io/" target="_blank" rel="noopener noreferrer">CodePen</a>.</span></p><script async="" src="../../../cpwebassets.codepen.io/assets/embed/ei.js"></script><p>Please do check out the code in the demos and be sure to <a href="https://codepen.io/collection/nNvvLx/" target="_blank" rel="noopener noreferrer">check out the collection</a>. I’ve also included a <code>React</code> port for those looking to add this to a <code>React</code> app. And also a <code>JavaScript</code> version that generates the markup for you!</p></div></article><div class="post-footer"><div class="post-footer__content"><p>Thanks for reading! Got a question or a suggestion?</p><h3 id="ping-me-🐦"><a href="../../contact/index.html">Ping me</a>! 🐦</h3><p>Use RSS? Hook up to <a href="../../posts.xml">the feed</a> so you don't miss any posts.</p></div><div class="post-footer__content"><h4>If you enjoyed that, you might like this:</h4><div class="interest__title"><a href="../how-to-finding-input-cursor-position-with-javascript/index.html">How To: Find Input Cursor Position with JavaScript</a></div></div><div class="post-footer__content"><h3 class="section-title">A Dose of Awesome?</h3><p></p><p>I love to learn and have fun while doing it. What makes that even more awesome, is sharing it with you! Sign up for my newsletter where I'll share things I've made, learned, and experienced.</p><p></p><div id="revue-embed"><form id="revue-form" action="https://www.getrevue.co/profile/jh3y/add_subscriber" method="post" name="revue-form" target="_blank"><audio src="../../assets/audio/streamer.mp3" preload="auto"></audio><div class="revue-form-group"><label class="hide" for="member_email">Email address *</label><input class="revue-form-field" id="member_email" placeholder="Your email address..." type="email" required="true" name="member[email]"></div><div class="revue-form-footer"><span>By subscribing, you agree with Revue's </span><a target="_blank" href="https://www.getrevue.co/terms" rel="noopener noreferrer">Terms</a><span> and </span><a target="_blank" href="https://www.getrevue.co/privacy" rel="noopener noreferrer">Privacy Policy</a>.</div><div class="revue-form-actions"><input id="member_submit" type="submit" value="Subscribe" name="member[subscribe]" data-sound="CLICK" data-sound-trigger="mousedown"></div></form></div></div></div></main><footer class="footer"><div class="footer__socials"><a class="social-link" href="../../posts.xml" rel="noopener noreferrer" target="_blank" title="Grab my RSS Feed!"><svg viewBox="0 0 24 24" role="img"><title>Rss icon</title><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"></path></svg></a><a class="social-link" href="https://twitter.com/intent/follow?screen_name=jh3yy" rel="noopener noreferrer" target="_blank" title="Come follow me on Twitter!"><svg viewBox="0 0 24 24" role="img"><title>Twitter icon</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a class="social-link" href="https://codepen.io/jh3y" rel="noopener noreferrer" target="_blank" title="Check out my CodePen"><svg viewBox="18 20 82 78" role="img"><title>Codepen icon</title><path d="M97.071,48.281c-0.007-0.047-0.019-0.092-0.026-0.139c-0.016-0.09-0.032-0.18-0.056-0.267 c-0.014-0.053-0.033-0.104-0.05-0.154c-0.025-0.078-0.051-0.156-0.082-0.232c-0.021-0.053-0.047-0.105-0.071-0.156 c-0.033-0.072-0.068-0.142-0.108-0.21c-0.029-0.051-0.061-0.1-0.091-0.148c-0.043-0.066-0.087-0.131-0.135-0.193 c-0.035-0.047-0.072-0.093-0.109-0.138c-0.051-0.059-0.104-0.117-0.159-0.172c-0.042-0.043-0.083-0.086-0.127-0.125 c-0.059-0.053-0.119-0.104-0.18-0.152c-0.048-0.037-0.095-0.074-0.145-0.109c-0.019-0.012-0.035-0.027-0.053-0.039L61.769,23.438 c-1.071-0.714-2.466-0.714-3.537,0L24.321,46.045c-0.018,0.012-0.034,0.027-0.053,0.039c-0.05,0.035-0.097,0.072-0.144,0.109 c-0.062,0.049-0.123,0.1-0.181,0.152c-0.045,0.039-0.086,0.082-0.128,0.125c-0.055,0.055-0.108,0.113-0.158,0.172 c-0.038,0.045-0.075,0.091-0.11,0.138c-0.047,0.062-0.092,0.127-0.134,0.193c-0.032,0.049-0.062,0.098-0.092,0.148 c-0.039,0.068-0.074,0.139-0.108,0.21c-0.024,0.051-0.049,0.104-0.071,0.156c-0.031,0.076-0.057,0.154-0.082,0.232 c-0.017,0.051-0.035,0.102-0.05,0.154c-0.023,0.087-0.039,0.177-0.056,0.267c-0.008,0.047-0.02,0.092-0.025,0.139 c-0.019,0.137-0.029,0.275-0.029,0.416v22.607c0,0.141,0.011,0.279,0.029,0.418c0.006,0.045,0.018,0.092,0.025,0.137 c0.017,0.09,0.032,0.18,0.056,0.268c0.015,0.053,0.033,0.104,0.05,0.154c0.025,0.078,0.051,0.155,0.082,0.233 c0.021,0.053,0.047,0.104,0.071,0.154c0.034,0.072,0.069,0.143,0.108,0.213c0.029,0.049,0.06,0.098,0.092,0.146 c0.042,0.066,0.087,0.131,0.134,0.193c0.035,0.049,0.072,0.094,0.11,0.139c0.05,0.059,0.103,0.117,0.158,0.172 c0.042,0.043,0.083,0.086,0.128,0.124c0.058,0.053,0.118,0.104,0.181,0.152c0.047,0.037,0.094,0.074,0.144,0.109 c0.019,0.012,0.035,0.027,0.053,0.039l33.911,22.607c0.536,0.357,1.152,0.537,1.769,0.537c0.616,0,1.233-0.18,1.768-0.537 L95.68,73.956c0.018-0.012,0.034-0.027,0.053-0.039c0.05-0.035,0.097-0.072,0.145-0.109c0.061-0.049,0.121-0.1,0.18-0.152 c0.044-0.038,0.085-0.081,0.127-0.124c0.056-0.055,0.108-0.113,0.159-0.172c0.037-0.045,0.074-0.09,0.109-0.139 c0.048-0.062,0.092-0.127,0.135-0.193c0.03-0.049,0.062-0.098,0.091-0.146c0.04-0.07,0.075-0.141,0.108-0.213 c0.024-0.051,0.05-0.102,0.071-0.154c0.031-0.078,0.057-0.155,0.082-0.233c0.017-0.051,0.036-0.102,0.05-0.154 c0.023-0.088,0.04-0.178,0.056-0.268c0.008-0.045,0.02-0.092,0.026-0.137c0.018-0.139,0.028-0.277,0.028-0.418V48.697 C97.1,48.557,97.089,48.418,97.071,48.281z M63.188,32.048L88.17,48.701l-11.158,7.465l-13.823-9.247V32.048z M56.812,32.048 v14.871l-13.822,9.247l-11.159-7.465L56.812,32.048z M29.278,54.665L37.255,60l-7.977,5.335V54.665z M56.812,87.953L31.831,71.3 l11.159-7.463l13.822,9.245V87.953z M60,67.543L48.723,60L60,52.458L71.276,60L60,67.543z M63.188,87.953V73.082l13.823-9.245 L88.17,71.3L63.188,87.953z M90.723,65.336L82.746,60l7.977-5.335V65.336z"></path></svg></a><a class="social-link" href="https://twitch.tv/jh3yy" rel="noopener noreferrer" target="_blank" title="Check out my latest live stream"><svg viewBox="0 0 24 24" role="img"><title>Twitch icon</title><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"></path></svg></a><a class="social-link" href="https://github.com/jh3y" rel="noopener noreferrer" target="_blank" title="See what I'm making on Github"><svg viewBox="0 0 24 24" role="img"><title>Github icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="footer__info"><span>|</span><span>jh3y © 2021</span></div></footer></div><script src="../../index.critical.js"></script><link rel="stylesheet" href="../../post.css"><script src="../../post.js"></script><script>window.netlifyIdentity&&window.netlifyIdentity.on("init",n=>{n||window.netlifyIdentity.on("login",()=>{document.location.href="/admin/"})})</script></body>
<!-- Mirrored from jhey.dev/writing/how-to-looping-block-reveal-effect/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 25 Nov 2021 22:50:37 GMT -->
</html>